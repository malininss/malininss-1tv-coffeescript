"use strict";

// Функция для упрощения создание элементов.
var arrows, carousel, carouselContainer, createElem, createScheduleList, currentStepWidth, firstSlide, itemWidth, itemsScrolled, lastSlide, numberOfSteps, pushSlider, referToJson, todayDate, updateDayProgram;

createElem = function createElem(tag, elemClass) {
  var elem;
  elem = document.createElement(tag);
  elem.classList.add(elemClass);
  return elem;
}; // Здесь нужно будет подтягивать актуальную дату.


todayDate = '2020-05-25'; // Обращаемся к json-файлу

referToJson = function referToJson(callback) {
  fetch('test.json', {
    method: 'get'
  }).then(function (response) {
    return response.json();
  }).then(function (schedule) {
    return callback(schedule);
  })["catch"](function (err) {
    return console.log(err);
  });
};

createScheduleList = function createScheduleList(schedule) {
  var date, dayNumber, dayWeek, key, mounth, registerEvents, scheduleContainer, scheduleDay, scheduleItem, scheduleLine, scheduleMounth, scheduleWeekday;
  scheduleContainer = document.querySelector('.tv-widget__schedule-items'); // Создаём расписание 

  for (key in schedule) {
    moment.locale('ru');
    date = moment(key);
    dayNumber = date.format('DD');
    mounth = date.format('MMMM');
    dayWeek = date.format('dd');
    scheduleItem = createElem('div', 'tv-widget__schedule-item');
    scheduleItem.dataset.date = key;

    if (dayWeek === 'сб' || dayWeek === 'вс') {
      scheduleItem.classList.add('tv-widget__schedule-item_weekend');
    } else if (dayWeek === 'пт') {
      scheduleItem.classList.add('tv-widget__schedule-item_friday');
    }

    scheduleDay = createElem('div', 'tv-widget__day');
    scheduleDay.textContent = dayNumber;
    scheduleMounth = createElem('div', 'tv-widget__mounth');
    scheduleMounth.textContent = mounth;
    scheduleLine = createElem('div', 'tv-widget__line');
    scheduleWeekday = createElem('div', 'tv-widget__weekday');
    scheduleWeekday.textContent = dayWeek;
    scheduleItem.appendChild(scheduleDay);
    scheduleItem.appendChild(scheduleMounth);
    scheduleItem.appendChild(scheduleLine);
    scheduleItem.appendChild(scheduleWeekday);
    scheduleContainer.appendChild(scheduleItem);
  } // Обновляем элементы при загрузке страницы


  updateDayProgram(todayDate, schedule[todayDate]); // Регистрируем события

  registerEvents = function registerEvents() {
    var scheduleDays;
    scheduleDays = Array.from(document.querySelectorAll('.tv-widget__schedule-item'));
    scheduleDays.forEach(function (item) {
      item.addEventListener('click', function (event) {
        var elem;
        elem = event.target.closest('.tv-widget__schedule-item');
        updateDayProgram(elem.getAttribute('data-date'), schedule[elem.getAttribute('data-date')]);
      });
    });
  };

  registerEvents();
}; // Обновляем элементы расписания под календарём


updateDayProgram = function updateDayProgram(date, schedule) {
  var programContainer, widgetTitleSpan, widgetTitleSpanText;
  widgetTitleSpan = document.querySelector('.tv_widget__today-date');
  widgetTitleSpanText = moment(date).format('dddd, DD MMMM YYYY');

  if (date === todayDate) {
    widgetTitleSpan.textContent = ' на сегодня';
  } else {
    widgetTitleSpan.textContent = '';
  }

  widgetTitleSpan.textContent += '. ' + widgetTitleSpanText[0].toUpperCase() + widgetTitleSpanText.slice(1);
  programContainer = document.querySelector('.tv-widget__program-cards');
  programContainer.innerHTML = '';
  schedule.forEach(function (item, index) {
    var award, awards, button, buttonBlock, channelImg, countryImg, key, liveTitle, programArtists, programCard, programCountry, programDescription, programTime, programTitle, titleBlock, tvChannel;
    programCard = createElem('div', 'tv-widget__program-card');
    titleBlock = createElem('div', 'tv-widget__program-title-block');
    programTime = createElem('div', 'tv-widget__program-time');
    programTime.textContent = item.time;
    programTitle = createElem('a', 'tv-widget__program-title');
    programTitle.href = '#';
    programTitle.textContent = item.title;
    awards = createElem('div', 'tv-widget__program-awards');

    for (key in item.awards) {
      if (item.awards[key] === 'true') {
        award = createElem('div', 'tv-widget__program-award');
        award.classList.add('tv-widget__program-award_' + key);
        awards.appendChild(award);
      }
    }

    programCountry = createElem('div', 'tv-widget__program-country');
    countryImg = document.createElement('img');
    countryImg.src = 'img/icons/russia-icon.svg';
    countryImg.alt = item.country;
    programCountry.appendChild(countryImg);
    tvChannel = createElem('div', 'tv-widget__program-channel');
    channelImg = document.createElement('img');
    channelImg.src = 'img/icons/1tv-icon.svg';
    channelImg.alt = item.channel;
    tvChannel.appendChild(channelImg);
    titleBlock.appendChild(programTime);
    titleBlock.appendChild(programTitle);
    titleBlock.appendChild(awards);

    if (item.country) {
      titleBlock.appendChild(programCountry);
    }

    titleBlock.appendChild(tvChannel);
    programDescription = createElem('div', 'tv-widget__program-description');
    programDescription.textContent = item.description;
    programArtists = createElem('div', 'tv-widget__program-artists');
    item.artists.forEach(function (artistName, index) {
      var artistElem;
      artistElem = createElem('a', 'tv-widget__program-artist');
      artistElem.href = '#';
      artistElem.textContent = artistName;
      programArtists.appendChild(artistElem);

      if (index !== item.artists.length - 1) {
        programArtists.innerHTML += ', ';
      }
    });
    programCard.appendChild(titleBlock);
    programCard.appendChild(programDescription);
    programCard.appendChild(programArtists); // Тут нужно указать текущие время и дату. Используется для показа кнопок "Смотреть" и "Сейчас в эфире"

    if (moment(date).format('L') === moment(todayDate).format('L') && item.time === '10:59') {
      buttonBlock = createElem('div', 'tv-widget__button-block');
      button = createElem('div', 'look-button');
      button.textContent = 'Смотреть';
      liveTitle = createElem('div', 'tv-widget__life-now');
      liveTitle.textContent = 'Сейчас в эфире';
      buttonBlock.appendChild(button);
      buttonBlock.appendChild(liveTitle);
      programCard.appendChild(buttonBlock);
    }

    programContainer.appendChild(programCard);
  });
}; // слайдер


arrows = document.querySelectorAll('.tv-widget__arrow-circle');
carouselContainer = document.querySelector('.tv-widget__schedule-corousel');
carousel = document.querySelector('.tv-widget__schedule-items');
firstSlide = true;
lastSlide = false;
itemWidth = 84; // Ширина элемента

numberOfSteps = void 0; // Количество шагов, которое предстоит сделать 

currentStepWidth = 60; // Изначальное остояние left 

itemsScrolled = 0; //Количество элементов, которые мы скроллим

pushSlider = function pushSlider() {
  var direction = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'right';
  var containerWidth, itemsNumber, remainedToScroll, slideWidth;
  itemsNumber = document.querySelectorAll('.tv-widget__schedule-item').length; // Общее количество элементов

  containerWidth = carouselContainer.offsetWidth; // Ширина контейнера
  // В зависимости от ширины контейнера определяем, сколько элементов надо прокрутить

  switch (true) {
    case containerWidth < 360:
      numberOfSteps = 1;
      break;

    case containerWidth < 420:
      numberOfSteps = 2;
      break;

    case containerWidth < 505:
      numberOfSteps = 3;
      break;

    case containerWidth < 585:
      numberOfSteps = 4;
      break;

    default:
      numberOfSteps = 5;
  } // Определяем, сколько элементов предстоить прокрутить. 


  remainedToScroll = itemsNumber - itemsScrolled - numberOfSteps - 2;

  if (direction === 'right') {
    if (remainedToScroll < numberOfSteps) {
      // Если количество элементов, сколько можно прокрутить, меньше количества шагов
      numberOfSteps = remainedToScroll; // Говорим, сколько шагов прокручиваем

      lastSlide = true; // Определяем, что слайд последний
    }
  }

  slideWidth = itemWidth * numberOfSteps; // Определяем ширину слайда (насколько нужно прокрутить)

  if (direction === 'right') {
    currentStepWidth -= slideWidth;
    itemsScrolled += numberOfSteps;

    if (lastSlide && remainedToScroll !== 0) {
      currentStepWidth = -1 * itemWidth * itemsNumber + containerWidth - 40;
    }

    if (firstSlide) {
      currentStepWidth += itemWidth;
      currentStepWidth -= 60;
      firstSlide = false; // Если прокручиваем влево
    }
  } else {
    currentStepWidth += slideWidth;
    itemsScrolled -= numberOfSteps;

    if (itemsScrolled <= 0) {
      currentStepWidth = 60; // возвращаемся в изначальню первую позицию

      itemsScrolled = 0;
      firstSlide = true;
    }

    if (lastSlide) {
      lastSlide = false;
    }
  }

  carousel.style.left = currentStepWidth.toString() + 'px';
};

Array.from(arrows).forEach(function (item) {
  item.addEventListener('click', function (event) {
    if (event.target.parentElement.classList.contains('tv-widget__arrow-circle_right')) {
      pushSlider();
    } else {
      pushSlider('left');
    }
  });
}); // Создаём календарь

referToJson(createScheduleList);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjaGVkdWxlLWNhcm91c2VsLmNvZmZlZSIsInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJhcnJvd3MiLCJjYXJvdXNlbCIsImNhcm91c2VsQ29udGFpbmVyIiwiY3JlYXRlRWxlbSIsImNyZWF0ZVNjaGVkdWxlTGlzdCIsImN1cnJlbnRTdGVwV2lkdGgiLCJmaXJzdFNsaWRlIiwiaXRlbVdpZHRoIiwiaXRlbXNTY3JvbGxlZCIsImxhc3RTbGlkZSIsIm51bWJlck9mU3RlcHMiLCJwdXNoU2xpZGVyIiwicmVmZXJUb0pzb24iLCJ0b2RheURhdGUiLCJ1cGRhdGVEYXlQcm9ncmFtIiwidGFnIiwiZWxlbUNsYXNzIiwiZWxlbSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImNhbGxiYWNrIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwic2NoZWR1bGUiLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZGF0ZSIsImRheU51bWJlciIsImRheVdlZWsiLCJrZXkiLCJtb3VudGgiLCJyZWdpc3RlckV2ZW50cyIsInNjaGVkdWxlQ29udGFpbmVyIiwic2NoZWR1bGVEYXkiLCJzY2hlZHVsZUl0ZW0iLCJzY2hlZHVsZUxpbmUiLCJzY2hlZHVsZU1vdW50aCIsInNjaGVkdWxlV2Vla2RheSIsInF1ZXJ5U2VsZWN0b3IiLCJtb21lbnQiLCJsb2NhbGUiLCJmb3JtYXQiLCJkYXRhc2V0IiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsInNjaGVkdWxlRGF5cyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaXRlbSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsImNsb3Nlc3QiLCJnZXRBdHRyaWJ1dGUiLCJwcm9ncmFtQ29udGFpbmVyIiwid2lkZ2V0VGl0bGVTcGFuIiwid2lkZ2V0VGl0bGVTcGFuVGV4dCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJpbm5lckhUTUwiLCJpbmRleCIsImF3YXJkIiwiYXdhcmRzIiwiYnV0dG9uIiwiYnV0dG9uQmxvY2siLCJjaGFubmVsSW1nIiwiY291bnRyeUltZyIsImxpdmVUaXRsZSIsInByb2dyYW1BcnRpc3RzIiwicHJvZ3JhbUNhcmQiLCJwcm9ncmFtQ291bnRyeSIsInByb2dyYW1EZXNjcmlwdGlvbiIsInByb2dyYW1UaW1lIiwicHJvZ3JhbVRpdGxlIiwidGl0bGVCbG9jayIsInR2Q2hhbm5lbCIsInRpbWUiLCJocmVmIiwidGl0bGUiLCJzcmMiLCJhbHQiLCJjb3VudHJ5IiwiY2hhbm5lbCIsImRlc2NyaXB0aW9uIiwiYXJ0aXN0cyIsImFydGlzdE5hbWUiLCJhcnRpc3RFbGVtIiwibGVuZ3RoIiwiZGlyZWN0aW9uIiwiY29udGFpbmVyV2lkdGgiLCJpdGVtc051bWJlciIsInJlbWFpbmVkVG9TY3JvbGwiLCJzbGlkZVdpZHRoIiwib2Zmc2V0V2lkdGgiLCJzdHlsZSIsImxlZnQiLCJ0b1N0cmluZyIsInBhcmVudEVsZW1lbnQiLCJjb250YWlucyJdLCJtYXBwaW5ncyI6Ijs7QUFBMkM7QUFBQSxJQUFBQSxNQUFBLEVBQUFDLFFBQUEsRUFBQUMsaUJBQUEsRUFBQUMsVUFBQSxFQUFBQyxrQkFBQSxFQUFBQyxnQkFBQSxFQUFBQyxVQUFBLEVBQUFDLFNBQUEsRUFBQUMsYUFBQSxFQUFBQyxTQUFBLEVBQUFDLGFBQUEsRUFBQUMsVUFBQSxFQUFBQyxXQUFBLEVBQUFDLFNBQUEsRUFBQUMsZ0JBQUE7O0FBQzNDWCxVQUFBLEdBQWEsb0JBQUNZLEdBQUQsRUFBTUMsU0FBTixFQUFBO0FBQ2IsTUFBQUMsSUFBQTtBQUFFQSxFQUFBQSxJQUFBLEdBQU9DLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QkosR0FBdkIsQ0FBUDtBQUNBRSxFQUFBQSxJQUFJLENBQUNHLFNBQUwsQ0FBZUMsR0FBZixDQUFtQkwsU0FBbkI7QUNJQSxTREhBQyxJQ0dBO0FETlcsQ0FBYixDLENDVUE7OztBREpBSixTQUFBLEdBQVksWUFBWixDLEND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LEVBQUFBLElBQUksQ0FBQ0MsZ0JBQUwsQ0FBc0IsT0FBdEIsRUFBK0IsVUFBQ0MsS0FBRCxFQUFBO0FBQzdCLFFBQUdBLEtBQUssQ0FBQ0MsTUFBTixDQUFhOEMsYUFBYixDQUEyQnJGLFNBQTNCLENBQXFDc0YsUUFBckMsQ0FBOEMsK0JBQTlDLENBQUgsRUFBQTtBQUNFL0YsTUFBQUEsVUFBQTtBQURGLEtBQUEsTUFBQTtBQUdFQSxNQUFBQSxVQUFBLENBQVcsTUFBWCxDQUFBO0FDQUQ7QURKSCxHQUFBO0FBREYsQ0FBQSxFLENDU0E7O0FEQ0FDLFdBQUEsQ0FBWVIsa0JBQVosQ0FBQSIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIjINCk0YPQvdC60YbQuNGPINC00LvRjyDRg9C/0YDQvtGJ0LXQvdC40Y8g0YHQvtC30LTQsNC90LjQtSDRjdC70LXQvNC10L3RgtC+0LIuXG5jcmVhdGVFbGVtID0gKHRhZywgZWxlbUNsYXNzKSAtPlxuICBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpXG4gIGVsZW0uY2xhc3NMaXN0LmFkZCBlbGVtQ2xhc3NcbiAgZWxlbSBcblxuIyDQl9C00LXRgdGMINC90YPQttC90L4g0LHRg9C00LXRgiDQv9C+0LTRgtGP0LPQuNCy0LDRgtGMINCw0LrRgtGD0LDQu9GM0L3Rg9GOINC00LDRgtGDLlxudG9kYXlEYXRlID0gJzIwMjAtMDUtMjUnXG5cbiMg0J7QsdGA0LDRidCw0LXQvNGB0Y8g0LoganNvbi3RhNCw0LnQu9GDXG5yZWZlclRvSnNvbiA9IChjYWxsYmFjaykgLT5cbiAgZmV0Y2goJ3Rlc3QuanNvbicsIG1ldGhvZDogJ2dldCcpLnRoZW4oKHJlc3BvbnNlKSAtPlxuICAgIHJlc3BvbnNlLmpzb24oKVxuICApLnRoZW4oKHNjaGVkdWxlKSAtPlxuICAgIGNhbGxiYWNrIHNjaGVkdWxlXG4gICkuY2F0Y2ggKGVycikgLT5cbiAgICBjb25zb2xlLmxvZyBlcnJcbiAgcmV0dXJuXG5cbmNyZWF0ZVNjaGVkdWxlTGlzdCA9IChzY2hlZHVsZSkgLT5cbiAgc2NoZWR1bGVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHYtd2lkZ2V0X19zY2hlZHVsZS1pdGVtcycpXG5cbiAgIyDQodC+0LfQtNCw0ZHQvCDRgNCw0YHQv9C40YHQsNC90LjQtSBcbiAgZm9yIGtleSBvZiBzY2hlZHVsZVxuICAgIG1vbWVudC5sb2NhbGUgJ3J1J1xuICAgIGRhdGUgPSBtb21lbnQoa2V5KVxuICAgIGRheU51bWJlciA9IGRhdGUuZm9ybWF0KCdERCcpXG4gICAgbW91bnRoID0gZGF0ZS5mb3JtYXQoJ01NTU0nKVxuICAgIGRheVdlZWsgPSBkYXRlLmZvcm1hdCgnZGQnKVxuICAgIHNjaGVkdWxlSXRlbSA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX3NjaGVkdWxlLWl0ZW0nKVxuICAgIHNjaGVkdWxlSXRlbS5kYXRhc2V0LmRhdGUgPSBrZXlcbiAgICBcbiAgICBpZiBkYXlXZWVrIGlzICfRgdCxJyBvciBkYXlXZWVrIGlzICfQstGBJ1xuICAgICAgc2NoZWR1bGVJdGVtLmNsYXNzTGlzdC5hZGQgJ3R2LXdpZGdldF9fc2NoZWR1bGUtaXRlbV93ZWVrZW5kJ1xuICAgIGVsc2UgaWYgZGF5V2VlayBpcyAn0L/RgidcbiAgICAgIHNjaGVkdWxlSXRlbS5jbGFzc0xpc3QuYWRkICd0di13aWRnZXRfX3NjaGVkdWxlLWl0ZW1fZnJpZGF5J1xuICAgICAgXG4gICAgc2NoZWR1bGVEYXkgPSBjcmVhdGVFbGVtKCdkaXYnLCAndHYtd2lkZ2V0X19kYXknKVxuICAgIHNjaGVkdWxlRGF5LnRleHRDb250ZW50ID0gZGF5TnVtYmVyXG5cbiAgICBzY2hlZHVsZU1vdW50aCA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX21vdW50aCcpXG4gICAgc2NoZWR1bGVNb3VudGgudGV4dENvbnRlbnQgPSBtb3VudGhcblxuICAgIHNjaGVkdWxlTGluZSA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX2xpbmUnKVxuXG4gICAgc2NoZWR1bGVXZWVrZGF5ID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fd2Vla2RheScpXG4gICAgc2NoZWR1bGVXZWVrZGF5LnRleHRDb250ZW50ID0gZGF5V2Vla1xuXG4gICAgc2NoZWR1bGVJdGVtLmFwcGVuZENoaWxkIHNjaGVkdWxlRGF5XG4gICAgc2NoZWR1bGVJdGVtLmFwcGVuZENoaWxkIHNjaGVkdWxlTW91bnRoXG4gICAgc2NoZWR1bGVJdGVtLmFwcGVuZENoaWxkIHNjaGVkdWxlTGluZVxuICAgIHNjaGVkdWxlSXRlbS5hcHBlbmRDaGlsZCBzY2hlZHVsZVdlZWtkYXlcblxuICAgIHNjaGVkdWxlQ29udGFpbmVyLmFwcGVuZENoaWxkIHNjaGVkdWxlSXRlbVxuXG4gICMg0J7QsdC90L7QstC70Y/QtdC8INGN0LvQtdC80LXQvdGC0Ysg0L/RgNC4INC30LDQs9GA0YPQt9C60LUg0YHRgtGA0LDQvdC40YbRi1xuICB1cGRhdGVEYXlQcm9ncmFtIHRvZGF5RGF0ZSwgc2NoZWR1bGVbdG9kYXlEYXRlXVxuXG4gICMg0KDQtdCz0LjRgdGC0YDQuNGA0YPQtdC8INGB0L7QsdGL0YLQuNGPXG4gIHJlZ2lzdGVyRXZlbnRzID0gLT5cbiAgICBzY2hlZHVsZURheXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50di13aWRnZXRfX3NjaGVkdWxlLWl0ZW0nKSlcbiAgICBzY2hlZHVsZURheXMuZm9yRWFjaCAoaXRlbSkgLT5cbiAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lciAnY2xpY2snLCAoZXZlbnQpIC0+XG4gICAgICAgIGVsZW0gPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLnR2LXdpZGdldF9fc2NoZWR1bGUtaXRlbScpXG4gICAgICAgIHVwZGF0ZURheVByb2dyYW0gZWxlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZGF0ZScpLCBzY2hlZHVsZVtlbGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1kYXRlJyldXG4gICAgICAgIHJldHVyblxuICAgICAgcmV0dXJuXG4gICAgcmV0dXJuXG5cbiAgcmVnaXN0ZXJFdmVudHMoKVxuICByZXR1cm5cblxuIyDQntCx0L3QvtCy0LvRj9C10Lwg0Y3Qu9C10LzQtdC90YLRiyDRgNCw0YHQv9C40YHQsNC90LjRjyDQv9C+0LQg0LrQsNC70LXQvdC00LDRgNGR0LxcbnVwZGF0ZURheVByb2dyYW0gPSAoZGF0ZSwgc2NoZWR1bGUpIC0+XG4gIHdpZGdldFRpdGxlU3BhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50dl93aWRnZXRfX3RvZGF5LWRhdGUnKVxuICB3aWRnZXRUaXRsZVNwYW5UZXh0ID0gbW9tZW50KGRhdGUpLmZvcm1hdCgnZGRkZCwgREQgTU1NTSBZWVlZJylcblxuICBpZiBkYXRlIGlzIHRvZGF5RGF0ZVxuICAgIHdpZGdldFRpdGxlU3Bhbi50ZXh0Q29udGVudCA9ICcg0L3QsCDRgdC10LPQvtC00L3RjydcbiAgZWxzZVxuICAgIHdpZGdldFRpdGxlU3Bhbi50ZXh0Q29udGVudCA9ICcnXG4gIHdpZGdldFRpdGxlU3Bhbi50ZXh0Q29udGVudCArPSAnLiAnICsgd2lkZ2V0VGl0bGVTcGFuVGV4dFswXS50b1VwcGVyQ2FzZSgpICsgd2lkZ2V0VGl0bGVTcGFuVGV4dC5zbGljZSgxKVxuXG4gIHByb2dyYW1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHYtd2lkZ2V0X19wcm9ncmFtLWNhcmRzJylcbiAgcHJvZ3JhbUNvbnRhaW5lci5pbm5lckhUTUwgPSAnJ1xuXG4gIHNjaGVkdWxlLmZvckVhY2ggKGl0ZW0sIGluZGV4KSAtPlxuICAgIHByb2dyYW1DYXJkID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fcHJvZ3JhbS1jYXJkJylcbiAgICB0aXRsZUJsb2NrID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fcHJvZ3JhbS10aXRsZS1ibG9jaycpXG4gICAgcHJvZ3JhbVRpbWUgPSBjcmVhdGVFbGVtKCdkaXYnLCAndHYtd2lkZ2V0X19wcm9ncmFtLXRpbWUnKVxuICAgIHByb2dyYW1UaW1lLnRleHRDb250ZW50ID0gaXRlbS50aW1lXG4gICAgcHJvZ3JhbVRpdGxlID0gY3JlYXRlRWxlbSgnYScsICd0di13aWRnZXRfX3Byb2dyYW0tdGl0bGUnKVxuICAgIHByb2dyYW1UaXRsZS5ocmVmID0gJyMnXG4gICAgcHJvZ3JhbVRpdGxlLnRleHRDb250ZW50ID0gaXRlbS50aXRsZVxuICAgIGF3YXJkcyA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX3Byb2dyYW0tYXdhcmRzJylcbiAgICBcbiAgICBmb3Iga2V5IG9mIGl0ZW0uYXdhcmRzXG4gICAgICBpZiBpdGVtLmF3YXJkc1trZXldIGlzICd0cnVlJ1xuICAgICAgICBhd2FyZCA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX3Byb2dyYW0tYXdhcmQnKVxuICAgICAgICBhd2FyZC5jbGFzc0xpc3QuYWRkICd0di13aWRnZXRfX3Byb2dyYW0tYXdhcmRfJyArIGtleVxuICAgICAgICBhd2FyZHMuYXBwZW5kQ2hpbGQgYXdhcmRcblxuICAgIHByb2dyYW1Db3VudHJ5ID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fcHJvZ3JhbS1jb3VudHJ5JylcblxuICAgIGNvdW50cnlJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxuICAgIGNvdW50cnlJbWcuc3JjID0gJ2ltZy9pY29ucy9ydXNzaWEtaWNvbi5zdmcnXG4gICAgY291bnRyeUltZy5hbHQgPSBpdGVtLmNvdW50cnlcbiAgICBcbiAgICBwcm9ncmFtQ291bnRyeS5hcHBlbmRDaGlsZCBjb3VudHJ5SW1nXG4gICAgdHZDaGFubmVsID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fcHJvZ3JhbS1jaGFubmVsJylcbiAgICBcbiAgICBjaGFubmVsSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcbiAgICBjaGFubmVsSW1nLnNyYyA9ICdpbWcvaWNvbnMvMXR2LWljb24uc3ZnJ1xuICAgIGNoYW5uZWxJbWcuYWx0ID0gaXRlbS5jaGFubmVsXG5cbiAgICB0dkNoYW5uZWwuYXBwZW5kQ2hpbGQgY2hhbm5lbEltZ1xuICAgIHRpdGxlQmxvY2suYXBwZW5kQ2hpbGQgcHJvZ3JhbVRpbWVcbiAgICB0aXRsZUJsb2NrLmFwcGVuZENoaWxkIHByb2dyYW1UaXRsZVxuICAgIHRpdGxlQmxvY2suYXBwZW5kQ2hpbGQgYXdhcmRzXG5cbiAgICBpZiBpdGVtLmNvdW50cnlcbiAgICAgIHRpdGxlQmxvY2suYXBwZW5kQ2hpbGQgcHJvZ3JhbUNvdW50cnlcblxuICAgIHRpdGxlQmxvY2suYXBwZW5kQ2hpbGQgdHZDaGFubmVsXG5cbiAgICBwcm9ncmFtRGVzY3JpcHRpb24gPSBjcmVhdGVFbGVtKCdkaXYnLCAndHYtd2lkZ2V0X19wcm9ncmFtLWRlc2NyaXB0aW9uJylcbiAgICBwcm9ncmFtRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBpdGVtLmRlc2NyaXB0aW9uXG5cbiAgICBwcm9ncmFtQXJ0aXN0cyA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX3Byb2dyYW0tYXJ0aXN0cycpXG5cbiAgICBpdGVtLmFydGlzdHMuZm9yRWFjaCAoYXJ0aXN0TmFtZSwgaW5kZXgpIC0+XG4gICAgICBhcnRpc3RFbGVtID0gY3JlYXRlRWxlbSgnYScsICd0di13aWRnZXRfX3Byb2dyYW0tYXJ0aXN0JylcbiAgICAgIGFydGlzdEVsZW0uaHJlZiA9ICcjJ1xuICAgICAgYXJ0aXN0RWxlbS50ZXh0Q29udGVudCA9IGFydGlzdE5hbWVcbiAgICAgIHByb2dyYW1BcnRpc3RzLmFwcGVuZENoaWxkIGFydGlzdEVsZW1cblxuICAgICAgaWYgaW5kZXggIT0gaXRlbS5hcnRpc3RzLmxlbmd0aCAtIDFcbiAgICAgICAgcHJvZ3JhbUFydGlzdHMuaW5uZXJIVE1MICs9ICcsICdcbiAgICAgIHJldHVyblxuICAgICAgXG4gICAgcHJvZ3JhbUNhcmQuYXBwZW5kQ2hpbGQgdGl0bGVCbG9ja1xuICAgIHByb2dyYW1DYXJkLmFwcGVuZENoaWxkIHByb2dyYW1EZXNjcmlwdGlvblxuICAgIHByb2dyYW1DYXJkLmFwcGVuZENoaWxkIHByb2dyYW1BcnRpc3RzXG5cbiAgICAjINCi0YPRgiDQvdGD0LbQvdC+INGD0LrQsNC30LDRgtGMINGC0LXQutGD0YnQuNC1INCy0YDQtdC80Y8g0Lgg0LTQsNGC0YMuINCY0YHQv9C+0LvRjNC30YPQtdGC0YHRjyDQtNC70Y8g0L/QvtC60LDQt9CwINC60L3QvtC/0L7QuiBcItCh0LzQvtGC0YDQtdGC0YxcIiDQuCBcItCh0LXQudGH0LDRgSDQsiDRjdGE0LjRgNC1XCJcbiAgICBpZiBtb21lbnQoZGF0ZSkuZm9ybWF0KCdMJykgaXMgbW9tZW50KHRvZGF5RGF0ZSkuZm9ybWF0KCdMJykgYW5kIGl0ZW0udGltZSBpcyAnMTA6NTknXG5cbiAgICAgIGJ1dHRvbkJsb2NrID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fYnV0dG9uLWJsb2NrJylcbiAgICAgIGJ1dHRvbiA9IGNyZWF0ZUVsZW0oJ2RpdicsICdsb29rLWJ1dHRvbicpXG4gICAgICBidXR0b24udGV4dENvbnRlbnQgPSAn0KHQvNC+0YLRgNC10YLRjCdcblxuICAgICAgbGl2ZVRpdGxlID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fbGlmZS1ub3cnKVxuICAgICAgbGl2ZVRpdGxlLnRleHRDb250ZW50ID0gJ9Ch0LXQudGH0LDRgSDQsiDRjdGE0LjRgNC1J1xuXG4gICAgICBidXR0b25CbG9jay5hcHBlbmRDaGlsZCBidXR0b25cbiAgICAgIGJ1dHRvbkJsb2NrLmFwcGVuZENoaWxkIGxpdmVUaXRsZVxuICAgICAgcHJvZ3JhbUNhcmQuYXBwZW5kQ2hpbGQgYnV0dG9uQmxvY2tcblxuICAgIHByb2dyYW1Db250YWluZXIuYXBwZW5kQ2hpbGQgcHJvZ3JhbUNhcmRcbiAgICByZXR1cm5cbiAgcmV0dXJuXG5cblxuIyDRgdC70LDQudC00LXRgFxuYXJyb3dzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnR2LXdpZGdldF9fYXJyb3ctY2lyY2xlJylcbmNhcm91c2VsQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnR2LXdpZGdldF9fc2NoZWR1bGUtY29yb3VzZWwnKVxuY2Fyb3VzZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHYtd2lkZ2V0X19zY2hlZHVsZS1pdGVtcycpXG5maXJzdFNsaWRlID0gdHJ1ZVxubGFzdFNsaWRlID0gZmFsc2Vcbml0ZW1XaWR0aCA9IDg0ICMg0KjQuNGA0LjQvdCwINGN0LvQtdC80LXQvdGC0LBcblxubnVtYmVyT2ZTdGVwcyA9IHVuZGVmaW5lZCAjINCa0L7Qu9C40YfQtdGB0YLQstC+INGI0LDQs9C+0LIsINC60L7RgtC+0YDQvtC1INC/0YDQtdC00YHRgtC+0LjRgiDRgdC00LXQu9Cw0YLRjCBcbmN1cnJlbnRTdGVwV2lkdGggPSA2MCAjINCY0LfQvdCw0YfQsNC70YzQvdC+0LUg0L7RgdGC0L7Rj9C90LjQtSBsZWZ0IFxuaXRlbXNTY3JvbGxlZCA9IDAgI9Ca0L7Qu9C40YfQtdGB0YLQstC+INGN0LvQtdC80LXQvdGC0L7Qsiwg0LrQvtGC0L7RgNGL0LUg0LzRiyDRgdC60YDQvtC70LvQuNC8XG5cblxucHVzaFNsaWRlciA9IChkaXJlY3Rpb24gPSAncmlnaHQnKSAtPlxuICBpdGVtc051bWJlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50di13aWRnZXRfX3NjaGVkdWxlLWl0ZW0nKS5sZW5ndGggIyDQntCx0YnQtdC1INC60L7Qu9C40YfQtdGB0YLQstC+INGN0LvQtdC80LXQvdGC0L7QslxuICBjb250YWluZXJXaWR0aCA9IGNhcm91c2VsQ29udGFpbmVyLm9mZnNldFdpZHRoICMg0KjQuNGA0LjQvdCwINC60L7QvdGC0LXQudC90LXRgNCwXG4gXG4gICMg0JIg0LfQsNCy0LjRgdC40LzQvtGB0YLQuCDQvtGCINGI0LjRgNC40L3RiyDQutC+0L3RgtC10LnQvdC10YDQsCDQvtC/0YDQtdC00LXQu9GP0LXQvCwg0YHQutC+0LvRjNC60L4g0Y3Qu9C10LzQtdC90YLQvtCyINC90LDQtNC+INC/0YDQvtC60YDRg9GC0LjRgtGMXG4gIHN3aXRjaCB0cnVlXG4gICAgd2hlbiBjb250YWluZXJXaWR0aCA8IDM2MFxuICAgICAgbnVtYmVyT2ZTdGVwcyA9IDFcbiAgICB3aGVuIGNvbnRhaW5lcldpZHRoIDwgNDIwXG4gICAgICBudW1iZXJPZlN0ZXBzID0gMlxuICAgIHdoZW4gY29udGFpbmVyV2lkdGggPCA1MDVcbiAgICAgIG51bWJlck9mU3RlcHMgPSAzXG4gICAgd2hlbiBjb250YWluZXJXaWR0aCA8IDU4NVxuICAgICAgbnVtYmVyT2ZTdGVwcyA9IDRcbiAgICBlbHNlXG4gICAgICBudW1iZXJPZlN0ZXBzID0gNVxuXG4gICMg0J7Qv9GA0LXQtNC10LvRj9C10LwsINGB0LrQvtC70YzQutC+INGN0LvQtdC80LXQvdGC0L7QsiDQv9GA0LXQtNGB0YLQvtC40YLRjCDQv9GA0L7QutGA0YPRgtC40YLRjC4gXG4gIHJlbWFpbmVkVG9TY3JvbGwgPSBpdGVtc051bWJlciAtIGl0ZW1zU2Nyb2xsZWQgLSBudW1iZXJPZlN0ZXBzIC0gMlxuXG4gIGlmIGRpcmVjdGlvbiBpcyAncmlnaHQnXG4gICAgaWYgcmVtYWluZWRUb1Njcm9sbCA8IG51bWJlck9mU3RlcHMgIyDQldGB0LvQuCDQutC+0LvQuNGH0LXRgdGC0LLQviDRjdC70LXQvNC10L3RgtC+0LIsINGB0LrQvtC70YzQutC+INC80L7QttC90L4g0L/RgNC+0LrRgNGD0YLQuNGC0YwsINC80LXQvdGM0YjQtSDQutC+0LvQuNGH0LXRgdGC0LLQsCDRiNCw0LPQvtCyXG4gICAgICBudW1iZXJPZlN0ZXBzID0gcmVtYWluZWRUb1Njcm9sbCAjINCT0L7QstC+0YDQuNC8LCDRgdC60L7Qu9GM0LrQviDRiNCw0LPQvtCyINC/0YDQvtC60YDRg9GH0LjQstCw0LXQvFxuICAgICAgbGFzdFNsaWRlID0gdHJ1ZSAjINCe0L/RgNC10LTQtdC70Y/QtdC8LCDRh9GC0L4g0YHQu9Cw0LnQtCDQv9C+0YHQu9C10LTQvdC40LlcblxuICBzbGlkZVdpZHRoID0gaXRlbVdpZHRoICogbnVtYmVyT2ZTdGVwcyAgIyDQntC/0YDQtdC00LXQu9GP0LXQvCDRiNC40YDQuNC90YMg0YHQu9Cw0LnQtNCwICjQvdCw0YHQutC+0LvRjNC60L4g0L3Rg9C20L3QviDQv9GA0L7QutGA0YPRgtC40YLRjClcblxuICBpZiBkaXJlY3Rpb24gaXMgJ3JpZ2h0J1xuICAgIGN1cnJlbnRTdGVwV2lkdGggLT0gc2xpZGVXaWR0aFxuICAgIGl0ZW1zU2Nyb2xsZWQgKz0gbnVtYmVyT2ZTdGVwc1xuXG4gICAgaWYgbGFzdFNsaWRlIGFuZCByZW1haW5lZFRvU2Nyb2xsICE9IDBcbiAgICAgIGN1cnJlbnRTdGVwV2lkdGggPSAtMSAqIGl0ZW1XaWR0aCAqIGl0ZW1zTnVtYmVyICsgY29udGFpbmVyV2lkdGggLSA0MFxuICAgICAgXG4gICAgaWYgZmlyc3RTbGlkZVxuICAgICAgY3VycmVudFN0ZXBXaWR0aCArPSBpdGVtV2lkdGhcbiAgICAgIGN1cnJlbnRTdGVwV2lkdGggLT0gNjBcbiAgICAgIGZpcnN0U2xpZGUgPSBmYWxzZVxuICBlbHNlICMg0JXRgdC70Lgg0L/RgNC+0LrRgNGD0YfQuNCy0LDQtdC8INCy0LvQtdCy0L5cbiAgICBjdXJyZW50U3RlcFdpZHRoICs9IHNsaWRlV2lkdGhcbiAgICBpdGVtc1Njcm9sbGVkIC09IG51bWJlck9mU3RlcHNcblxuICAgIGlmIGl0ZW1zU2Nyb2xsZWQgPD0gMFxuICAgICAgY3VycmVudFN0ZXBXaWR0aCA9IDYwICMg0LLQvtC30LLRgNCw0YnQsNC10LzRgdGPINCyINC40LfQvdCw0YfQsNC70YzQvdGOINC/0LXRgNCy0YPRjiDQv9C+0LfQuNGG0LjRjlxuICAgICAgaXRlbXNTY3JvbGxlZCA9IDBcbiAgICAgIGZpcnN0U2xpZGUgPSB0cnVlIFxuXG4gICAgaWYgbGFzdFNsaWRlXG4gICAgICBsYXN0U2xpZGUgPSBmYWxzZVxuXG4gIGNhcm91c2VsLnN0eWxlLmxlZnQgPSBjdXJyZW50U3RlcFdpZHRoLnRvU3RyaW5nKCkgKyAncHgnXG4gIHJldHVyblxuXG5BcnJheS5mcm9tKGFycm93cykuZm9yRWFjaCAoaXRlbSkgLT5cbiAgaXRlbS5hZGRFdmVudExpc3RlbmVyICdjbGljaycsIChldmVudCkgLT5cbiAgICBpZiBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3R2LXdpZGdldF9fYXJyb3ctY2lyY2xlX3JpZ2h0JylcbiAgICAgIHB1c2hTbGlkZXIoKVxuICAgIGVsc2VcbiAgICAgIHB1c2hTbGlkZXIgJ2xlZnQnXG4gICAgcmV0dXJuXG4gIHJldHVyblxuXG4jINCh0L7Qt9C00LDRkdC8INC60LDQu9C10L3QtNCw0YDRjFxucmVmZXJUb0pzb24gY3JlYXRlU2NoZWR1bGVMaXN0IiwiLy8g0KTRg9C90LrRhtC40Y8g0LTQu9GPINGD0L/RgNC+0YnQtdC90LjRjyDRgdC+0LfQtNCw0L3QuNC1INGN0LvQtdC80LXQvdGC0L7Qsi5cbnZhciBhcnJvd3MsIGNhcm91c2VsLCBjYXJvdXNlbENvbnRhaW5lciwgY3JlYXRlRWxlbSwgY3JlYXRlU2NoZWR1bGVMaXN0LCBjdXJyZW50U3RlcFdpZHRoLCBmaXJzdFNsaWRlLCBpdGVtV2lkdGgsIGl0ZW1zU2Nyb2xsZWQsIGxhc3RTbGlkZSwgbnVtYmVyT2ZTdGVwcywgcHVzaFNsaWRlciwgcmVmZXJUb0pzb24sIHRvZGF5RGF0ZSwgdXBkYXRlRGF5UHJvZ3JhbTtcblxuY3JlYXRlRWxlbSA9IGZ1bmN0aW9uKHRhZywgZWxlbUNsYXNzKSB7XG4gIHZhciBlbGVtO1xuICBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICBlbGVtLmNsYXNzTGlzdC5hZGQoZWxlbUNsYXNzKTtcbiAgcmV0dXJuIGVsZW07XG59O1xuXG5cbi8vINCX0LTQtdGB0Ywg0L3Rg9C20L3QviDQsdGD0LTQtdGCINC/0L7QtNGC0Y/Qs9C40LLQsNGC0Ywg0LDQutGC0YPQsNC70YzQvdGD0Y4g0LTQsNGC0YMuXG50b2RheURhdGUgPSAnMjAyMC0wNS0yNSc7XG5cbi8vINCe0LHRgNCw0YnQsNC10LzRgdGPINC6IGpzb24t0YTQsNC50LvRg1xucmVmZXJUb0pzb24gPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICBmZXRjaCgndGVzdC5qc29uJywge1xuICAgIG1ldGhvZDogJ2dldCdcbiAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gIH0pLnRoZW4oZnVuY3Rpb24oc2NoZWR1bGUpIHtcbiAgICByZXR1cm4gY2FsbGJhY2soc2NoZWR1bGUpO1xuICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICByZXR1cm4gY29uc29sZS5sb2coZXJyKTtcbiAgfSk7XG59O1xuXG5jcmVhdGVTY2hlZHVsZUxpc3QgPSBmdW5jdGlvbihzY2hlZHVsZSkge1xuICB2YXIgZGF0ZSwgZGF5TnVtYmVyLCBkYXlXZWVrLCBrZXksIG1vdW50aCwgcmVnaXN0ZXJFdmVudHMsIHNjaGVkdWxlQ29udGFpbmVyLCBzY2hlZHVsZURheSwgc2NoZWR1bGVJdGVtLCBzY2hlZHVsZUxpbmUsIHNjaGVkdWxlTW91bnRoLCBzY2hlZHVsZVdlZWtkYXk7XG4gIHNjaGVkdWxlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnR2LXdpZGdldF9fc2NoZWR1bGUtaXRlbXMnKTtcbi8vINCh0L7Qt9C00LDRkdC8INGA0LDRgdC/0LjRgdCw0L3QuNC1IFxuICBmb3IgKGtleSBpbiBzY2hlZHVsZSkge1xuICAgIG1vbWVudC5sb2NhbGUoJ3J1Jyk7XG4gICAgZGF0ZSA9IG1vbWVudChrZXkpO1xuICAgIGRheU51bWJlciA9IGRhdGUuZm9ybWF0KCdERCcpO1xuICAgIG1vdW50aCA9IGRhdGUuZm9ybWF0KCdNTU1NJyk7XG4gICAgZGF5V2VlayA9IGRhdGUuZm9ybWF0KCdkZCcpO1xuICAgIHNjaGVkdWxlSXRlbSA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX3NjaGVkdWxlLWl0ZW0nKTtcbiAgICBzY2hlZHVsZUl0ZW0uZGF0YXNldC5kYXRlID0ga2V5O1xuICAgIGlmIChkYXlXZWVrID09PSAn0YHQsScgfHwgZGF5V2VlayA9PT0gJ9Cy0YEnKSB7XG4gICAgICBzY2hlZHVsZUl0ZW0uY2xhc3NMaXN0LmFkZCgndHYtd2lkZ2V0X19zY2hlZHVsZS1pdGVtX3dlZWtlbmQnKTtcbiAgICB9IGVsc2UgaWYgKGRheVdlZWsgPT09ICfQv9GCJykge1xuICAgICAgc2NoZWR1bGVJdGVtLmNsYXNzTGlzdC5hZGQoJ3R2LXdpZGdldF9fc2NoZWR1bGUtaXRlbV9mcmlkYXknKTtcbiAgICB9XG4gICAgc2NoZWR1bGVEYXkgPSBjcmVhdGVFbGVtKCdkaXYnLCAndHYtd2lkZ2V0X19kYXknKTtcbiAgICBzY2hlZHVsZURheS50ZXh0Q29udGVudCA9IGRheU51bWJlcjtcbiAgICBzY2hlZHVsZU1vdW50aCA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX21vdW50aCcpO1xuICAgIHNjaGVkdWxlTW91bnRoLnRleHRDb250ZW50ID0gbW91bnRoO1xuICAgIHNjaGVkdWxlTGluZSA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX2xpbmUnKTtcbiAgICBzY2hlZHVsZVdlZWtkYXkgPSBjcmVhdGVFbGVtKCdkaXYnLCAndHYtd2lkZ2V0X193ZWVrZGF5Jyk7XG4gICAgc2NoZWR1bGVXZWVrZGF5LnRleHRDb250ZW50ID0gZGF5V2VlaztcbiAgICBzY2hlZHVsZUl0ZW0uYXBwZW5kQ2hpbGQoc2NoZWR1bGVEYXkpO1xuICAgIHNjaGVkdWxlSXRlbS5hcHBlbmRDaGlsZChzY2hlZHVsZU1vdW50aCk7XG4gICAgc2NoZWR1bGVJdGVtLmFwcGVuZENoaWxkKHNjaGVkdWxlTGluZSk7XG4gICAgc2NoZWR1bGVJdGVtLmFwcGVuZENoaWxkKHNjaGVkdWxlV2Vla2RheSk7XG4gICAgc2NoZWR1bGVDb250YWluZXIuYXBwZW5kQ2hpbGQoc2NoZWR1bGVJdGVtKTtcbiAgfVxuICAvLyDQntCx0L3QvtCy0LvRj9C10Lwg0Y3Qu9C10LzQtdC90YLRiyDQv9GA0Lgg0LfQsNCz0YDRg9C30LrQtSDRgdGC0YDQsNC90LjRhtGLXG4gIHVwZGF0ZURheVByb2dyYW0odG9kYXlEYXRlLCBzY2hlZHVsZVt0b2RheURhdGVdKTtcbiAgLy8g0KDQtdCz0LjRgdGC0YDQuNGA0YPQtdC8INGB0L7QsdGL0YLQuNGPXG4gIHJlZ2lzdGVyRXZlbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNjaGVkdWxlRGF5cztcbiAgICBzY2hlZHVsZURheXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50di13aWRnZXRfX3NjaGVkdWxlLWl0ZW0nKSk7XG4gICAgc2NoZWR1bGVEYXlzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHZhciBlbGVtO1xuICAgICAgICBlbGVtID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy50di13aWRnZXRfX3NjaGVkdWxlLWl0ZW0nKTtcbiAgICAgICAgdXBkYXRlRGF5UHJvZ3JhbShlbGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1kYXRlJyksIHNjaGVkdWxlW2VsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLWRhdGUnKV0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG4gIHJlZ2lzdGVyRXZlbnRzKCk7XG59O1xuXG4vLyDQntCx0L3QvtCy0LvRj9C10Lwg0Y3Qu9C10LzQtdC90YLRiyDRgNCw0YHQv9C40YHQsNC90LjRjyDQv9C+0LQg0LrQsNC70LXQvdC00LDRgNGR0LxcbnVwZGF0ZURheVByb2dyYW0gPSBmdW5jdGlvbihkYXRlLCBzY2hlZHVsZSkge1xuICB2YXIgcHJvZ3JhbUNvbnRhaW5lciwgd2lkZ2V0VGl0bGVTcGFuLCB3aWRnZXRUaXRsZVNwYW5UZXh0O1xuICB3aWRnZXRUaXRsZVNwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHZfd2lkZ2V0X190b2RheS1kYXRlJyk7XG4gIHdpZGdldFRpdGxlU3BhblRleHQgPSBtb21lbnQoZGF0ZSkuZm9ybWF0KCdkZGRkLCBERCBNTU1NIFlZWVknKTtcbiAgaWYgKGRhdGUgPT09IHRvZGF5RGF0ZSkge1xuICAgIHdpZGdldFRpdGxlU3Bhbi50ZXh0Q29udGVudCA9ICcg0L3QsCDRgdC10LPQvtC00L3Rjyc7XG4gIH0gZWxzZSB7XG4gICAgd2lkZ2V0VGl0bGVTcGFuLnRleHRDb250ZW50ID0gJyc7XG4gIH1cbiAgd2lkZ2V0VGl0bGVTcGFuLnRleHRDb250ZW50ICs9ICcuICcgKyB3aWRnZXRUaXRsZVNwYW5UZXh0WzBdLnRvVXBwZXJDYXNlKCkgKyB3aWRnZXRUaXRsZVNwYW5UZXh0LnNsaWNlKDEpO1xuICBwcm9ncmFtQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnR2LXdpZGdldF9fcHJvZ3JhbS1jYXJkcycpO1xuICBwcm9ncmFtQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICBzY2hlZHVsZS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XG4gICAgdmFyIGF3YXJkLCBhd2FyZHMsIGJ1dHRvbiwgYnV0dG9uQmxvY2ssIGNoYW5uZWxJbWcsIGNvdW50cnlJbWcsIGtleSwgbGl2ZVRpdGxlLCBwcm9ncmFtQXJ0aXN0cywgcHJvZ3JhbUNhcmQsIHByb2dyYW1Db3VudHJ5LCBwcm9ncmFtRGVzY3JpcHRpb24sIHByb2dyYW1UaW1lLCBwcm9ncmFtVGl0bGUsIHRpdGxlQmxvY2ssIHR2Q2hhbm5lbDtcbiAgICBwcm9ncmFtQ2FyZCA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX3Byb2dyYW0tY2FyZCcpO1xuICAgIHRpdGxlQmxvY2sgPSBjcmVhdGVFbGVtKCdkaXYnLCAndHYtd2lkZ2V0X19wcm9ncmFtLXRpdGxlLWJsb2NrJyk7XG4gICAgcHJvZ3JhbVRpbWUgPSBjcmVhdGVFbGVtKCdkaXYnLCAndHYtd2lkZ2V0X19wcm9ncmFtLXRpbWUnKTtcbiAgICBwcm9ncmFtVGltZS50ZXh0Q29udGVudCA9IGl0ZW0udGltZTtcbiAgICBwcm9ncmFtVGl0bGUgPSBjcmVhdGVFbGVtKCdhJywgJ3R2LXdpZGdldF9fcHJvZ3JhbS10aXRsZScpO1xuICAgIHByb2dyYW1UaXRsZS5ocmVmID0gJyMnO1xuICAgIHByb2dyYW1UaXRsZS50ZXh0Q29udGVudCA9IGl0ZW0udGl0bGU7XG4gICAgYXdhcmRzID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fcHJvZ3JhbS1hd2FyZHMnKTtcbiAgICBmb3IgKGtleSBpbiBpdGVtLmF3YXJkcykge1xuICAgICAgaWYgKGl0ZW0uYXdhcmRzW2tleV0gPT09ICd0cnVlJykge1xuICAgICAgICBhd2FyZCA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX3Byb2dyYW0tYXdhcmQnKTtcbiAgICAgICAgYXdhcmQuY2xhc3NMaXN0LmFkZCgndHYtd2lkZ2V0X19wcm9ncmFtLWF3YXJkXycgKyBrZXkpO1xuICAgICAgICBhd2FyZHMuYXBwZW5kQ2hpbGQoYXdhcmQpO1xuICAgICAgfVxuICAgIH1cbiAgICBwcm9ncmFtQ291bnRyeSA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX3Byb2dyYW0tY291bnRyeScpO1xuICAgIGNvdW50cnlJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBjb3VudHJ5SW1nLnNyYyA9ICdpbWcvaWNvbnMvcnVzc2lhLWljb24uc3ZnJztcbiAgICBjb3VudHJ5SW1nLmFsdCA9IGl0ZW0uY291bnRyeTtcbiAgICBwcm9ncmFtQ291bnRyeS5hcHBlbmRDaGlsZChjb3VudHJ5SW1nKTtcbiAgICB0dkNoYW5uZWwgPSBjcmVhdGVFbGVtKCdkaXYnLCAndHYtd2lkZ2V0X19wcm9ncmFtLWNoYW5uZWwnKTtcbiAgICBjaGFubmVsSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgY2hhbm5lbEltZy5zcmMgPSAnaW1nL2ljb25zLzF0di1pY29uLnN2Zyc7XG4gICAgY2hhbm5lbEltZy5hbHQgPSBpdGVtLmNoYW5uZWw7XG4gICAgdHZDaGFubmVsLmFwcGVuZENoaWxkKGNoYW5uZWxJbWcpO1xuICAgIHRpdGxlQmxvY2suYXBwZW5kQ2hpbGQocHJvZ3JhbVRpbWUpO1xuICAgIHRpdGxlQmxvY2suYXBwZW5kQ2hpbGQocHJvZ3JhbVRpdGxlKTtcbiAgICB0aXRsZUJsb2NrLmFwcGVuZENoaWxkKGF3YXJkcyk7XG4gICAgaWYgKGl0ZW0uY291bnRyeSkge1xuICAgICAgdGl0bGVCbG9jay5hcHBlbmRDaGlsZChwcm9ncmFtQ291bnRyeSk7XG4gICAgfVxuICAgIHRpdGxlQmxvY2suYXBwZW5kQ2hpbGQodHZDaGFubmVsKTtcbiAgICBwcm9ncmFtRGVzY3JpcHRpb24gPSBjcmVhdGVFbGVtKCdkaXYnLCAndHYtd2lkZ2V0X19wcm9ncmFtLWRlc2NyaXB0aW9uJyk7XG4gICAgcHJvZ3JhbURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gaXRlbS5kZXNjcmlwdGlvbjtcbiAgICBwcm9ncmFtQXJ0aXN0cyA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX3Byb2dyYW0tYXJ0aXN0cycpO1xuICAgIGl0ZW0uYXJ0aXN0cy5mb3JFYWNoKGZ1bmN0aW9uKGFydGlzdE5hbWUsIGluZGV4KSB7XG4gICAgICB2YXIgYXJ0aXN0RWxlbTtcbiAgICAgIGFydGlzdEVsZW0gPSBjcmVhdGVFbGVtKCdhJywgJ3R2LXdpZGdldF9fcHJvZ3JhbS1hcnRpc3QnKTtcbiAgICAgIGFydGlzdEVsZW0uaHJlZiA9ICcjJztcbiAgICAgIGFydGlzdEVsZW0udGV4dENvbnRlbnQgPSBhcnRpc3ROYW1lO1xuICAgICAgcHJvZ3JhbUFydGlzdHMuYXBwZW5kQ2hpbGQoYXJ0aXN0RWxlbSk7XG4gICAgICBpZiAoaW5kZXggIT09IGl0ZW0uYXJ0aXN0cy5sZW5ndGggLSAxKSB7XG4gICAgICAgIHByb2dyYW1BcnRpc3RzLmlubmVySFRNTCArPSAnLCAnO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHByb2dyYW1DYXJkLmFwcGVuZENoaWxkKHRpdGxlQmxvY2spO1xuICAgIHByb2dyYW1DYXJkLmFwcGVuZENoaWxkKHByb2dyYW1EZXNjcmlwdGlvbik7XG4gICAgcHJvZ3JhbUNhcmQuYXBwZW5kQ2hpbGQocHJvZ3JhbUFydGlzdHMpO1xuICAgIC8vINCi0YPRgiDQvdGD0LbQvdC+INGD0LrQsNC30LDRgtGMINGC0LXQutGD0YnQuNC1INCy0YDQtdC80Y8g0Lgg0LTQsNGC0YMuINCY0YHQv9C+0LvRjNC30YPQtdGC0YHRjyDQtNC70Y8g0L/QvtC60LDQt9CwINC60L3QvtC/0L7QuiBcItCh0LzQvtGC0YDQtdGC0YxcIiDQuCBcItCh0LXQudGH0LDRgSDQsiDRjdGE0LjRgNC1XCJcbiAgICBpZiAobW9tZW50KGRhdGUpLmZvcm1hdCgnTCcpID09PSBtb21lbnQodG9kYXlEYXRlKS5mb3JtYXQoJ0wnKSAmJiBpdGVtLnRpbWUgPT09ICcxMDo1OScpIHtcbiAgICAgIGJ1dHRvbkJsb2NrID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fYnV0dG9uLWJsb2NrJyk7XG4gICAgICBidXR0b24gPSBjcmVhdGVFbGVtKCdkaXYnLCAnbG9vay1idXR0b24nKTtcbiAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC80L7RgtGA0LXRgtGMJztcbiAgICAgIGxpdmVUaXRsZSA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX2xpZmUtbm93Jyk7XG4gICAgICBsaXZlVGl0bGUudGV4dENvbnRlbnQgPSAn0KHQtdC50YfQsNGBINCyINGN0YTQuNGA0LUnO1xuICAgICAgYnV0dG9uQmxvY2suYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICAgIGJ1dHRvbkJsb2NrLmFwcGVuZENoaWxkKGxpdmVUaXRsZSk7XG4gICAgICBwcm9ncmFtQ2FyZC5hcHBlbmRDaGlsZChidXR0b25CbG9jayk7XG4gICAgfVxuICAgIHByb2dyYW1Db250YWluZXIuYXBwZW5kQ2hpbGQocHJvZ3JhbUNhcmQpO1xuICB9KTtcbn07XG5cbi8vINGB0LvQsNC50LTQtdGAXG5hcnJvd3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudHYtd2lkZ2V0X19hcnJvdy1jaXJjbGUnKTtcblxuY2Fyb3VzZWxDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHYtd2lkZ2V0X19zY2hlZHVsZS1jb3JvdXNlbCcpO1xuXG5jYXJvdXNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50di13aWRnZXRfX3NjaGVkdWxlLWl0ZW1zJyk7XG5cbmZpcnN0U2xpZGUgPSB0cnVlO1xuXG5sYXN0U2xpZGUgPSBmYWxzZTtcblxuaXRlbVdpZHRoID0gODQ7IC8vINCo0LjRgNC40L3QsCDRjdC70LXQvNC10L3RgtCwXG5cbm51bWJlck9mU3RlcHMgPSB2b2lkIDA7IC8vINCa0L7Qu9C40YfQtdGB0YLQstC+INGI0LDQs9C+0LIsINC60L7RgtC+0YDQvtC1INC/0YDQtdC00YHRgtC+0LjRgiDRgdC00LXQu9Cw0YLRjCBcblxuY3VycmVudFN0ZXBXaWR0aCA9IDYwOyAvLyDQmNC30L3QsNGH0LDQu9GM0L3QvtC1INC+0YHRgtC+0Y/QvdC40LUgbGVmdCBcblxuaXRlbXNTY3JvbGxlZCA9IDA7IC8v0JrQvtC70LjRh9C10YHRgtCy0L4g0Y3Qu9C10LzQtdC90YLQvtCyLCDQutC+0YLQvtGA0YvQtSDQvNGLINGB0LrRgNC+0LvQu9C40LxcblxucHVzaFNsaWRlciA9IGZ1bmN0aW9uKGRpcmVjdGlvbiA9ICdyaWdodCcpIHtcbiAgdmFyIGNvbnRhaW5lcldpZHRoLCBpdGVtc051bWJlciwgcmVtYWluZWRUb1Njcm9sbCwgc2xpZGVXaWR0aDtcbiAgaXRlbXNOdW1iZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudHYtd2lkZ2V0X19zY2hlZHVsZS1pdGVtJykubGVuZ3RoOyAvLyDQntCx0YnQtdC1INC60L7Qu9C40YfQtdGB0YLQstC+INGN0LvQtdC80LXQvdGC0L7QslxuICBjb250YWluZXJXaWR0aCA9IGNhcm91c2VsQ29udGFpbmVyLm9mZnNldFdpZHRoOyAvLyDQqNC40YDQuNC90LAg0LrQvtC90YLQtdC50L3QtdGA0LBcbiAgXG4gICAgICAvLyDQkiDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4INC+0YIg0YjQuNGA0LjQvdGLINC60L7QvdGC0LXQudC90LXRgNCwINC+0L/RgNC10LTQtdC70Y/QtdC8LCDRgdC60L7Qu9GM0LrQviDRjdC70LXQvNC10L3RgtC+0LIg0L3QsNC00L4g0L/RgNC+0LrRgNGD0YLQuNGC0YxcbiAgc3dpdGNoICh0cnVlKSB7XG4gICAgY2FzZSBjb250YWluZXJXaWR0aCA8IDM2MDpcbiAgICAgIG51bWJlck9mU3RlcHMgPSAxO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBjb250YWluZXJXaWR0aCA8IDQyMDpcbiAgICAgIG51bWJlck9mU3RlcHMgPSAyO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBjb250YWluZXJXaWR0aCA8IDUwNTpcbiAgICAgIG51bWJlck9mU3RlcHMgPSAzO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBjb250YWluZXJXaWR0aCA8IDU4NTpcbiAgICAgIG51bWJlck9mU3RlcHMgPSA0O1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIG51bWJlck9mU3RlcHMgPSA1O1xuICB9XG4gIC8vINCe0L/RgNC10LTQtdC70Y/QtdC8LCDRgdC60L7Qu9GM0LrQviDRjdC70LXQvNC10L3RgtC+0LIg0L/RgNC10LTRgdGC0L7QuNGC0Ywg0L/RgNC+0LrRgNGD0YLQuNGC0YwuIFxuICByZW1haW5lZFRvU2Nyb2xsID0gaXRlbXNOdW1iZXIgLSBpdGVtc1Njcm9sbGVkIC0gbnVtYmVyT2ZTdGVwcyAtIDI7XG4gIGlmIChkaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcbiAgICBpZiAocmVtYWluZWRUb1Njcm9sbCA8IG51bWJlck9mU3RlcHMpIHsgLy8g0JXRgdC70Lgg0LrQvtC70LjRh9C10YHRgtCy0L4g0Y3Qu9C10LzQtdC90YLQvtCyLCDRgdC60L7Qu9GM0LrQviDQvNC+0LbQvdC+INC/0YDQvtC60YDRg9GC0LjRgtGMLCDQvNC10L3RjNGI0LUg0LrQvtC70LjRh9C10YHRgtCy0LAg0YjQsNCz0L7QslxuICAgICAgbnVtYmVyT2ZTdGVwcyA9IHJlbWFpbmVkVG9TY3JvbGw7IC8vINCT0L7QstC+0YDQuNC8LCDRgdC60L7Qu9GM0LrQviDRiNCw0LPQvtCyINC/0YDQvtC60YDRg9GH0LjQstCw0LXQvFxuICAgICAgbGFzdFNsaWRlID0gdHJ1ZTsgLy8g0J7Qv9GA0LXQtNC10LvRj9C10LwsINGH0YLQviDRgdC70LDQudC0INC/0L7RgdC70LXQtNC90LjQuVxuICAgIH1cbiAgfVxuICBzbGlkZVdpZHRoID0gaXRlbVdpZHRoICogbnVtYmVyT2ZTdGVwczsgLy8g0J7Qv9GA0LXQtNC10LvRj9C10Lwg0YjQuNGA0LjQvdGDINGB0LvQsNC50LTQsCAo0L3QsNGB0LrQvtC70YzQutC+INC90YPQttC90L4g0L/RgNC+0LrRgNGD0YLQuNGC0YwpXG4gIGlmIChkaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcbiAgICBjdXJyZW50U3RlcFdpZHRoIC09IHNsaWRlV2lkdGg7XG4gICAgaXRlbXNTY3JvbGxlZCArPSBudW1iZXJPZlN0ZXBzO1xuICAgIGlmIChsYXN0U2xpZGUgJiYgcmVtYWluZWRUb1Njcm9sbCAhPT0gMCkge1xuICAgICAgY3VycmVudFN0ZXBXaWR0aCA9IC0xICogaXRlbVdpZHRoICogaXRlbXNOdW1iZXIgKyBjb250YWluZXJXaWR0aCAtIDQwO1xuICAgIH1cbiAgICBpZiAoZmlyc3RTbGlkZSkge1xuICAgICAgY3VycmVudFN0ZXBXaWR0aCArPSBpdGVtV2lkdGg7XG4gICAgICBjdXJyZW50U3RlcFdpZHRoIC09IDYwO1xuICAgICAgZmlyc3RTbGlkZSA9IGZhbHNlOyAvLyDQldGB0LvQuCDQv9GA0L7QutGA0YPRh9C40LLQsNC10Lwg0LLQu9C10LLQvlxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjdXJyZW50U3RlcFdpZHRoICs9IHNsaWRlV2lkdGg7XG4gICAgaXRlbXNTY3JvbGxlZCAtPSBudW1iZXJPZlN0ZXBzO1xuICAgIGlmIChpdGVtc1Njcm9sbGVkIDw9IDApIHtcbiAgICAgIGN1cnJlbnRTdGVwV2lkdGggPSA2MDsgLy8g0LLQvtC30LLRgNCw0YnQsNC10LzRgdGPINCyINC40LfQvdCw0YfQsNC70YzQvdGOINC/0LXRgNCy0YPRjiDQv9C+0LfQuNGG0LjRjlxuICAgICAgaXRlbXNTY3JvbGxlZCA9IDA7XG4gICAgICBmaXJzdFNsaWRlID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGxhc3RTbGlkZSkge1xuICAgICAgbGFzdFNsaWRlID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIGNhcm91c2VsLnN0eWxlLmxlZnQgPSBjdXJyZW50U3RlcFdpZHRoLnRvU3RyaW5nKCkgKyAncHgnO1xufTtcblxuQXJyYXkuZnJvbShhcnJvd3MpLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0di13aWRnZXRfX2Fycm93LWNpcmNsZV9yaWdodCcpKSB7XG4gICAgICBwdXNoU2xpZGVyKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHB1c2hTbGlkZXIoJ2xlZnQnKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbi8vINCh0L7Qt9C00LDRkdC8INC60LDQu9C10L3QtNCw0YDRjFxucmVmZXJUb0pzb24oY3JlYXRlU2NoZWR1bGVMaXN0KTtcbiJdfQ==

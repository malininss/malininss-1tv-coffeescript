"use strict";

// Функция для упрощения создание элементов.
var arrows, carousel, carouselContainer, createElem, createScheduleList, currentStepWidth, firstSlide, itemWidth, itemsScrolled, lastSlide, numberOfSteps, pushSlider, referToJson, todayDate, updateDayProgram;

createElem = function createElem(tag, elemClass) {
  var elem;
  elem = document.createElement(tag);
  elem.classList.add(elemClass);
  return elem;
}; // Здесь нужно будет подтягивать актуальную дату.


todayDate = '2020-05-25'; // Обращаемся к json-файлу

referToJson = function referToJson(callback) {
  fetch('test.json', {
    method: 'get'
  }).then(function (response) {
    return response.json();
  }).then(function (schedule) {
    return callback(schedule);
  })["catch"](function (err) {
    return console.log(err);
  });
};

createScheduleList = function createScheduleList(schedule) {
  var date, dayNumber, dayWeek, key, mounth, registerEvents, scheduleContainer, scheduleDay, scheduleItem, scheduleLine, scheduleMounth, scheduleWeekday;
  scheduleContainer = document.querySelector('.tv-widget__schedule-items'); // Создаём расписание 

  for (key in schedule) {
    moment.locale('ru');
    date = moment(key);
    dayNumber = date.format('DD');
    mounth = date.format('MMMM');
    dayWeek = date.format('dd');
    scheduleItem = createElem('div', 'tv-widget__schedule-item');
    scheduleItem.dataset.date = key;

    if (dayWeek === 'сб' || dayWeek === 'вс') {
      scheduleItem.classList.add('tv-widget__schedule-item_weekend');
    } else if (dayWeek === 'пт') {
      scheduleItem.classList.add('tv-widget__schedule-item_friday');
    }

    scheduleDay = createElem('div', 'tv-widget__day');
    scheduleDay.textContent = dayNumber;
    scheduleMounth = createElem('div', 'tv-widget__mounth');
    scheduleMounth.textContent = mounth;
    scheduleLine = createElem('div', 'tv-widget__line');
    scheduleWeekday = createElem('div', 'tv-widget__weekday');
    scheduleWeekday.textContent = dayWeek;
    scheduleItem.appendChild(scheduleDay);
    scheduleItem.appendChild(scheduleMounth);
    scheduleItem.appendChild(scheduleLine);
    scheduleItem.appendChild(scheduleWeekday);
    scheduleContainer.appendChild(scheduleItem);
  } // Обновляем элементы при загрузке страницы


  updateDayProgram(todayDate, schedule[todayDate]); // Регистрируем события

  registerEvents = function registerEvents() {
    var scheduleDays;
    scheduleDays = Array.from(document.querySelectorAll('.tv-widget__schedule-item'));
    scheduleDays.forEach(function (item) {
      item.addEventListener('click', function (event) {
        var elem;
        elem = event.target.closest('.tv-widget__schedule-item');
        updateDayProgram(elem.getAttribute('data-date'), schedule[elem.getAttribute('data-date')]);
      });
    });
  };

  registerEvents();
}; // Обновляем элементы расписания под календарём


updateDayProgram = function updateDayProgram(date, schedule) {
  var programContainer, widgetTitleSpan, widgetTitleSpanText;
  widgetTitleSpan = document.querySelector('.tv_widget__today-date');
  widgetTitleSpanText = moment(date).format('dddd, DD MMMM YYYY');

  if (date === todayDate) {
    widgetTitleSpan.textContent = ' на сегодня';
  } else {
    widgetTitleSpan.textContent = '';
  }

  widgetTitleSpan.textContent += ". ".concat(widgetTitleSpanText[0].toUpperCase()).concat(widgetTitleSpanText.slice(1));
  programContainer = document.querySelector('.tv-widget__program-cards');
  programContainer.innerHTML = '';
  schedule.forEach(function (item, index) {
    var award, awards, button, buttonBlock, channelImg, countryImg, key, liveTitle, programArtists, programCard, programCountry, programDescription, programTime, programTitle, titleBlock, tvChannel;
    programCard = createElem('div', 'tv-widget__program-card');
    titleBlock = createElem('div', 'tv-widget__program-title-block');
    programTime = createElem('div', 'tv-widget__program-time');
    programTime.textContent = item.time;
    programTitle = createElem('a', 'tv-widget__program-title');
    programTitle.href = '#';
    programTitle.textContent = item.title;
    awards = createElem('div', 'tv-widget__program-awards');

    for (key in item.awards) {
      if (item.awards[key] === 'true') {
        award = createElem('div', 'tv-widget__program-award');
        award.classList.add('tv-widget__program-award_' + key);
        awards.appendChild(award);
      }
    }

    programCountry = createElem('div', 'tv-widget__program-country');
    countryImg = document.createElement('img');
    countryImg.src = 'img/icons/russia-icon.svg';
    countryImg.alt = item.country;
    programCountry.appendChild(countryImg);
    tvChannel = createElem('div', 'tv-widget__program-channel');
    channelImg = document.createElement('img');
    channelImg.src = 'img/icons/1tv-icon.svg';
    channelImg.alt = item.channel;
    tvChannel.appendChild(channelImg);
    titleBlock.appendChild(programTime);
    titleBlock.appendChild(programTitle);
    titleBlock.appendChild(awards);

    if (item.country) {
      titleBlock.appendChild(programCountry);
    }

    titleBlock.appendChild(tvChannel);
    programDescription = createElem('div', 'tv-widget__program-description');
    programDescription.textContent = item.description;
    programArtists = createElem('div', 'tv-widget__program-artists');
    item.artists.forEach(function (artistName, index) {
      var artistElem;
      artistElem = createElem('a', 'tv-widget__program-artist');
      artistElem.href = '#';
      artistElem.textContent = artistName;
      programArtists.appendChild(artistElem);

      if (index !== item.artists.length - 1) {
        programArtists.innerHTML += ', ';
      }
    });
    programCard.appendChild(titleBlock);
    programCard.appendChild(programDescription);
    programCard.appendChild(programArtists); // Тут нужно указать текущие время и дату. Используется для показа кнопок "Смотреть" и "Сейчас в эфире"

    if (moment(date).format('L') === moment(todayDate).format('L') && item.time === '10:59') {
      buttonBlock = createElem('div', 'tv-widget__button-block');
      button = createElem('div', 'look-button');
      button.textContent = 'Смотреть';
      liveTitle = createElem('div', 'tv-widget__life-now');
      liveTitle.textContent = 'Сейчас в эфире';
      buttonBlock.appendChild(button);
      buttonBlock.appendChild(liveTitle);
      programCard.appendChild(buttonBlock);
    }

    programContainer.appendChild(programCard);
  });
}; // слайдер


arrows = document.querySelectorAll('.tv-widget__arrow-circle');
carouselContainer = document.querySelector('.tv-widget__schedule-corousel');
carousel = document.querySelector('.tv-widget__schedule-items');
firstSlide = true;
lastSlide = false;
itemWidth = 84; // Ширина элемента

numberOfSteps = void 0; // Количество шагов, которое предстоит сделать 

currentStepWidth = 60; // Изначальное остояние left 

itemsScrolled = 0; //Количество элементов, которые мы скроллим

pushSlider = function pushSlider() {
  var direction = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'right';
  var containerWidth, itemsNumber, remainedToScroll, slideWidth;
  itemsNumber = document.querySelectorAll('.tv-widget__schedule-item').length; // Общее количество элементов

  containerWidth = carouselContainer.offsetWidth; // Ширина контейнера
  // В зависимости от ширины контейнера определяем, сколько элементов надо прокрутить

  switch (true) {
    case containerWidth < 360:
      numberOfSteps = 1;
      break;

    case containerWidth < 420:
      numberOfSteps = 2;
      break;

    case containerWidth < 505:
      numberOfSteps = 3;
      break;

    case containerWidth < 585:
      numberOfSteps = 4;
      break;

    default:
      numberOfSteps = 5;
  } // Определяем, сколько элементов предстоить прокрутить. 


  remainedToScroll = itemsNumber - itemsScrolled - numberOfSteps - 2;

  if (direction === 'right') {
    if (remainedToScroll < numberOfSteps) {
      // Если количество элементов, сколько можно прокрутить, меньше количества шагов
      numberOfSteps = remainedToScroll; // Говорим, сколько шагов прокручиваем

      lastSlide = true; // Определяем, что слайд последний
    }
  }

  slideWidth = itemWidth * numberOfSteps; // Определяем ширину слайда (насколько нужно прокрутить)

  if (direction === 'right') {
    currentStepWidth -= slideWidth;
    itemsScrolled += numberOfSteps;

    if (lastSlide && remainedToScroll !== 0) {
      currentStepWidth = -1 * itemWidth * itemsNumber + containerWidth - 40;
    }

    if (firstSlide) {
      currentStepWidth += itemWidth;
      currentStepWidth -= 60;
      firstSlide = false; // Если прокручиваем влево
    }
  } else {
    currentStepWidth += slideWidth;
    itemsScrolled -= numberOfSteps;

    if (itemsScrolled <= 0) {
      currentStepWidth = 60; // возвращаемся в изначальню первую позицию

      itemsScrolled = 0;
      firstSlide = true;
    }

    if (lastSlide) {
      lastSlide = false;
    }
  }

  carousel.style.left = currentStepWidth.toString() + 'px';
};

Array.from(arrows).forEach(function (item) {
  item.addEventListener('click', function (event) {
    if (event.target.parentElement.classList.contains('tv-widget__arrow-circle_right')) {
      pushSlider();
    } else {
      pushSlider('left');
    }
  });
}); // Создаём календарь

referToJson(createScheduleList);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjaGVkdWxlLWNhcm91c2VsLmNvZmZlZSIsInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJhcnJvd3MiLCJjYXJvdXNlbCIsImNhcm91c2VsQ29udGFpbmVyIiwiY3JlYXRlRWxlbSIsImNyZWF0ZVNjaGVkdWxlTGlzdCIsImN1cnJlbnRTdGVwV2lkdGgiLCJmaXJzdFNsaWRlIiwiaXRlbVdpZHRoIiwiaXRlbXNTY3JvbGxlZCIsImxhc3RTbGlkZSIsIm51bWJlck9mU3RlcHMiLCJwdXNoU2xpZGVyIiwicmVmZXJUb0pzb24iLCJ0b2RheURhdGUiLCJ1cGRhdGVEYXlQcm9ncmFtIiwidGFnIiwiZWxlbUNsYXNzIiwiZWxlbSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImNhbGxiYWNrIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwic2NoZWR1bGUiLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZGF0ZSIsImRheU51bWJlciIsImRheVdlZWsiLCJrZXkiLCJtb3VudGgiLCJyZWdpc3RlckV2ZW50cyIsInNjaGVkdWxlQ29udGFpbmVyIiwic2NoZWR1bGVEYXkiLCJzY2hlZHVsZUl0ZW0iLCJzY2hlZHVsZUxpbmUiLCJzY2hlZHVsZU1vdW50aCIsInNjaGVkdWxlV2Vla2RheSIsInF1ZXJ5U2VsZWN0b3IiLCJtb21lbnQiLCJsb2NhbGUiLCJmb3JtYXQiLCJkYXRhc2V0IiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsInNjaGVkdWxlRGF5cyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaXRlbSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsImNsb3Nlc3QiLCJnZXRBdHRyaWJ1dGUiLCJwcm9ncmFtQ29udGFpbmVyIiwid2lkZ2V0VGl0bGVTcGFuIiwid2lkZ2V0VGl0bGVTcGFuVGV4dCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJpbm5lckhUTUwiLCJpbmRleCIsImF3YXJkIiwiYXdhcmRzIiwiYnV0dG9uIiwiYnV0dG9uQmxvY2siLCJjaGFubmVsSW1nIiwiY291bnRyeUltZyIsImxpdmVUaXRsZSIsInByb2dyYW1BcnRpc3RzIiwicHJvZ3JhbUNhcmQiLCJwcm9ncmFtQ291bnRyeSIsInByb2dyYW1EZXNjcmlwdGlvbiIsInByb2dyYW1UaW1lIiwicHJvZ3JhbVRpdGxlIiwidGl0bGVCbG9jayIsInR2Q2hhbm5lbCIsInRpbWUiLCJocmVmIiwidGl0bGUiLCJzcmMiLCJhbHQiLCJjb3VudHJ5IiwiY2hhbm5lbCIsImRlc2NyaXB0aW9uIiwiYXJ0aXN0cyIsImFydGlzdE5hbWUiLCJhcnRpc3RFbGVtIiwibGVuZ3RoIiwiZGlyZWN0aW9uIiwiY29udGFpbmVyV2lkdGgiLCJpdGVtc051bWJlciIsInJlbWFpbmVkVG9TY3JvbGwiLCJzbGlkZVdpZHRoIiwib2Zmc2V0V2lkdGgiLCJzdHlsZSIsImxlZnQiLCJ0b1N0cmluZyIsInBhcmVudEVsZW1lbnQiLCJjb250YWlucyJdLCJtYXBwaW5ncyI6Ijs7QUFBMkM7QUFBQSxJQUFBQSxNQUFBLEVBQUFDLFFBQUEsRUFBQUMsaUJBQUEsRUFBQUMsVUFBQSxFQUFBQyxrQkFBQSxFQUFBQyxnQkFBQSxFQUFBQyxVQUFBLEVBQUFDLFNBQUEsRUFBQUMsYUFBQSxFQUFBQyxTQUFBLEVBQUFDLGFBQUEsRUFBQUMsVUFBQSxFQUFBQyxXQUFBLEVBQUFDLFNBQUEsRUFBQUMsZ0JBQUE7O0FBQzNDWCxVQUFBLEdBQWEsb0JBQUNZLEdBQUQsRUFBTUMsU0FBTixFQUFBO0FBQ2IsTUFBQUMsSUFBQTtBQUFFQSxFQUFBQSxJQUFBLEdBQU9DLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QkosR0FBdkIsQ0FBUDtBQUNBRSxFQUFBQSxJQUFJLENBQUNHLFNBQUwsQ0FBZUMsR0FBZixDQUFtQkwsU0FBbkI7QUNJQSxTREhBQyxJQ0dBO0FETlcsQ0FBYixDLENDVUE7OztBREpBSixTQUFBLEdBQVksWUFBWixDLEND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QUFBLElBQUksQ0FBQ0MsZ0JBQUwsQ0FBc0IsT0FBdEIsRUFBK0IsVUFBQ0MsS0FBRCxFQUFBO0FBQzdCLFFBQUdBLEtBQUssQ0FBQ0MsTUFBTixDQUFhOEMsYUFBYixDQUEyQnJGLFNBQTNCLENBQXFDc0YsUUFBckMsQ0FBOEMsK0JBQTlDLENBQUgsRUFBQTtBQUNFL0YsTUFBQUEsVUFBQTtBQURGLEtBQUEsTUFBQTtBQUdFQSxNQUFBQSxVQUFBLENBQVcsTUFBWCxDQUFBO0FDQUQ7QURKSCxHQUFBO0FBREYsQ0FBQSxFLENDU0E7O0FEQ0FDLFdBQUEsQ0FBWVIsa0JBQVosQ0FBQSIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIjINCk0YPQvdC60YbQuNGPINC00LvRjyDRg9C/0YDQvtGJ0LXQvdC40Y8g0YHQvtC30LTQsNC90LjQtSDRjdC70LXQvNC10L3RgtC+0LIuXG5jcmVhdGVFbGVtID0gKHRhZywgZWxlbUNsYXNzKSAtPlxuICBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpXG4gIGVsZW0uY2xhc3NMaXN0LmFkZCBlbGVtQ2xhc3NcbiAgZWxlbSBcblxuIyDQl9C00LXRgdGMINC90YPQttC90L4g0LHRg9C00LXRgiDQv9C+0LTRgtGP0LPQuNCy0LDRgtGMINCw0LrRgtGD0LDQu9GM0L3Rg9GOINC00LDRgtGDLlxudG9kYXlEYXRlID0gJzIwMjAtMDUtMjUnXG5cbiMg0J7QsdGA0LDRidCw0LXQvNGB0Y8g0LoganNvbi3RhNCw0LnQu9GDXG5yZWZlclRvSnNvbiA9IChjYWxsYmFjaykgLT5cbiAgZmV0Y2goJ3Rlc3QuanNvbicsIG1ldGhvZDogJ2dldCcpLnRoZW4oKHJlc3BvbnNlKSAtPlxuICAgIHJlc3BvbnNlLmpzb24oKVxuICApLnRoZW4oKHNjaGVkdWxlKSAtPlxuICAgIGNhbGxiYWNrIHNjaGVkdWxlXG4gICkuY2F0Y2ggKGVycikgLT5cbiAgICBjb25zb2xlLmxvZyBlcnJcbiAgcmV0dXJuXG5cbmNyZWF0ZVNjaGVkdWxlTGlzdCA9IChzY2hlZHVsZSkgLT5cbiAgc2NoZWR1bGVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHYtd2lkZ2V0X19zY2hlZHVsZS1pdGVtcycpXG5cbiAgIyDQodC+0LfQtNCw0ZHQvCDRgNCw0YHQv9C40YHQsNC90LjQtSBcbiAgZm9yIGtleSBvZiBzY2hlZHVsZVxuICAgIG1vbWVudC5sb2NhbGUgJ3J1J1xuICAgIGRhdGUgPSBtb21lbnQoa2V5KVxuICAgIGRheU51bWJlciA9IGRhdGUuZm9ybWF0KCdERCcpXG4gICAgbW91bnRoID0gZGF0ZS5mb3JtYXQoJ01NTU0nKVxuICAgIGRheVdlZWsgPSBkYXRlLmZvcm1hdCgnZGQnKVxuICAgIHNjaGVkdWxlSXRlbSA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX3NjaGVkdWxlLWl0ZW0nKVxuICAgIHNjaGVkdWxlSXRlbS5kYXRhc2V0LmRhdGUgPSBrZXlcbiAgICBcbiAgICBpZiBkYXlXZWVrIGlzICfRgdCxJyBvciBkYXlXZWVrIGlzICfQstGBJ1xuICAgICAgc2NoZWR1bGVJdGVtLmNsYXNzTGlzdC5hZGQgJ3R2LXdpZGdldF9fc2NoZWR1bGUtaXRlbV93ZWVrZW5kJ1xuICAgIGVsc2UgaWYgZGF5V2VlayBpcyAn0L/RgidcbiAgICAgIHNjaGVkdWxlSXRlbS5jbGFzc0xpc3QuYWRkICd0di13aWRnZXRfX3NjaGVkdWxlLWl0ZW1fZnJpZGF5J1xuICAgICAgXG4gICAgc2NoZWR1bGVEYXkgPSBjcmVhdGVFbGVtKCdkaXYnLCAndHYtd2lkZ2V0X19kYXknKVxuICAgIHNjaGVkdWxlRGF5LnRleHRDb250ZW50ID0gZGF5TnVtYmVyXG5cbiAgICBzY2hlZHVsZU1vdW50aCA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX21vdW50aCcpXG4gICAgc2NoZWR1bGVNb3VudGgudGV4dENvbnRlbnQgPSBtb3VudGhcblxuICAgIHNjaGVkdWxlTGluZSA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX2xpbmUnKVxuXG4gICAgc2NoZWR1bGVXZWVrZGF5ID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fd2Vla2RheScpXG4gICAgc2NoZWR1bGVXZWVrZGF5LnRleHRDb250ZW50ID0gZGF5V2Vla1xuXG4gICAgc2NoZWR1bGVJdGVtLmFwcGVuZENoaWxkIHNjaGVkdWxlRGF5XG4gICAgc2NoZWR1bGVJdGVtLmFwcGVuZENoaWxkIHNjaGVkdWxlTW91bnRoXG4gICAgc2NoZWR1bGVJdGVtLmFwcGVuZENoaWxkIHNjaGVkdWxlTGluZVxuICAgIHNjaGVkdWxlSXRlbS5hcHBlbmRDaGlsZCBzY2hlZHVsZVdlZWtkYXlcblxuICAgIHNjaGVkdWxlQ29udGFpbmVyLmFwcGVuZENoaWxkIHNjaGVkdWxlSXRlbVxuXG4gICMg0J7QsdC90L7QstC70Y/QtdC8INGN0LvQtdC80LXQvdGC0Ysg0L/RgNC4INC30LDQs9GA0YPQt9C60LUg0YHRgtGA0LDQvdC40YbRi1xuICB1cGRhdGVEYXlQcm9ncmFtIHRvZGF5RGF0ZSwgc2NoZWR1bGVbdG9kYXlEYXRlXVxuXG4gICMg0KDQtdCz0LjRgdGC0YDQuNGA0YPQtdC8INGB0L7QsdGL0YLQuNGPXG4gIHJlZ2lzdGVyRXZlbnRzID0gLT5cbiAgICBzY2hlZHVsZURheXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50di13aWRnZXRfX3NjaGVkdWxlLWl0ZW0nKSlcbiAgICBzY2hlZHVsZURheXMuZm9yRWFjaCAoaXRlbSkgLT5cbiAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lciAnY2xpY2snLCAoZXZlbnQpIC0+XG4gICAgICAgIGVsZW0gPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLnR2LXdpZGdldF9fc2NoZWR1bGUtaXRlbScpXG4gICAgICAgIHVwZGF0ZURheVByb2dyYW0gZWxlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZGF0ZScpLCBzY2hlZHVsZVtlbGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1kYXRlJyldXG4gICAgICAgIHJldHVyblxuICAgICAgcmV0dXJuXG4gICAgcmV0dXJuXG5cbiAgcmVnaXN0ZXJFdmVudHMoKVxuICByZXR1cm5cblxuIyDQntCx0L3QvtCy0LvRj9C10Lwg0Y3Qu9C10LzQtdC90YLRiyDRgNCw0YHQv9C40YHQsNC90LjRjyDQv9C+0LQg0LrQsNC70LXQvdC00LDRgNGR0LxcbnVwZGF0ZURheVByb2dyYW0gPSAoZGF0ZSwgc2NoZWR1bGUpIC0+XG4gIHdpZGdldFRpdGxlU3BhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50dl93aWRnZXRfX3RvZGF5LWRhdGUnKVxuICB3aWRnZXRUaXRsZVNwYW5UZXh0ID0gbW9tZW50KGRhdGUpLmZvcm1hdCgnZGRkZCwgREQgTU1NTSBZWVlZJylcblxuICBpZiBkYXRlIGlzIHRvZGF5RGF0ZVxuICAgIHdpZGdldFRpdGxlU3Bhbi50ZXh0Q29udGVudCA9ICcg0L3QsCDRgdC10LPQvtC00L3RjydcbiAgZWxzZVxuICAgIHdpZGdldFRpdGxlU3Bhbi50ZXh0Q29udGVudCA9ICcnXG4gIHdpZGdldFRpdGxlU3Bhbi50ZXh0Q29udGVudCArPSBcIi4gI3t3aWRnZXRUaXRsZVNwYW5UZXh0WzBdLnRvVXBwZXJDYXNlKCl9I3t3aWRnZXRUaXRsZVNwYW5UZXh0LnNsaWNlKDEpfVwiXG5cbiAgcHJvZ3JhbUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50di13aWRnZXRfX3Byb2dyYW0tY2FyZHMnKVxuICBwcm9ncmFtQ29udGFpbmVyLmlubmVySFRNTCA9ICcnXG5cbiAgc2NoZWR1bGUuZm9yRWFjaCAoaXRlbSwgaW5kZXgpIC0+XG4gICAgcHJvZ3JhbUNhcmQgPSBjcmVhdGVFbGVtKCdkaXYnLCAndHYtd2lkZ2V0X19wcm9ncmFtLWNhcmQnKVxuICAgIHRpdGxlQmxvY2sgPSBjcmVhdGVFbGVtKCdkaXYnLCAndHYtd2lkZ2V0X19wcm9ncmFtLXRpdGxlLWJsb2NrJylcbiAgICBwcm9ncmFtVGltZSA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX3Byb2dyYW0tdGltZScpXG4gICAgcHJvZ3JhbVRpbWUudGV4dENvbnRlbnQgPSBpdGVtLnRpbWVcbiAgICBwcm9ncmFtVGl0bGUgPSBjcmVhdGVFbGVtKCdhJywgJ3R2LXdpZGdldF9fcHJvZ3JhbS10aXRsZScpXG4gICAgcHJvZ3JhbVRpdGxlLmhyZWYgPSAnIydcbiAgICBwcm9ncmFtVGl0bGUudGV4dENvbnRlbnQgPSBpdGVtLnRpdGxlXG4gICAgYXdhcmRzID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fcHJvZ3JhbS1hd2FyZHMnKVxuICAgIFxuICAgIGZvciBrZXkgb2YgaXRlbS5hd2FyZHNcbiAgICAgIGlmIGl0ZW0uYXdhcmRzW2tleV0gaXMgJ3RydWUnXG4gICAgICAgIGF3YXJkID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fcHJvZ3JhbS1hd2FyZCcpXG4gICAgICAgIGF3YXJkLmNsYXNzTGlzdC5hZGQgJ3R2LXdpZGdldF9fcHJvZ3JhbS1hd2FyZF8nICsga2V5XG4gICAgICAgIGF3YXJkcy5hcHBlbmRDaGlsZCBhd2FyZFxuXG4gICAgcHJvZ3JhbUNvdW50cnkgPSBjcmVhdGVFbGVtKCdkaXYnLCAndHYtd2lkZ2V0X19wcm9ncmFtLWNvdW50cnknKVxuXG4gICAgY291bnRyeUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpXG4gICAgY291bnRyeUltZy5zcmMgPSAnaW1nL2ljb25zL3J1c3NpYS1pY29uLnN2ZydcbiAgICBjb3VudHJ5SW1nLmFsdCA9IGl0ZW0uY291bnRyeVxuICAgIFxuICAgIHByb2dyYW1Db3VudHJ5LmFwcGVuZENoaWxkIGNvdW50cnlJbWdcbiAgICB0dkNoYW5uZWwgPSBjcmVhdGVFbGVtKCdkaXYnLCAndHYtd2lkZ2V0X19wcm9ncmFtLWNoYW5uZWwnKVxuICAgIFxuICAgIGNoYW5uZWxJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxuICAgIGNoYW5uZWxJbWcuc3JjID0gJ2ltZy9pY29ucy8xdHYtaWNvbi5zdmcnXG4gICAgY2hhbm5lbEltZy5hbHQgPSBpdGVtLmNoYW5uZWxcblxuICAgIHR2Q2hhbm5lbC5hcHBlbmRDaGlsZCBjaGFubmVsSW1nXG4gICAgdGl0bGVCbG9jay5hcHBlbmRDaGlsZCBwcm9ncmFtVGltZVxuICAgIHRpdGxlQmxvY2suYXBwZW5kQ2hpbGQgcHJvZ3JhbVRpdGxlXG4gICAgdGl0bGVCbG9jay5hcHBlbmRDaGlsZCBhd2FyZHNcblxuICAgIGlmIGl0ZW0uY291bnRyeVxuICAgICAgdGl0bGVCbG9jay5hcHBlbmRDaGlsZCBwcm9ncmFtQ291bnRyeVxuXG4gICAgdGl0bGVCbG9jay5hcHBlbmRDaGlsZCB0dkNoYW5uZWxcblxuICAgIHByb2dyYW1EZXNjcmlwdGlvbiA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX3Byb2dyYW0tZGVzY3JpcHRpb24nKVxuICAgIHByb2dyYW1EZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGl0ZW0uZGVzY3JpcHRpb25cblxuICAgIHByb2dyYW1BcnRpc3RzID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fcHJvZ3JhbS1hcnRpc3RzJylcblxuICAgIGl0ZW0uYXJ0aXN0cy5mb3JFYWNoIChhcnRpc3ROYW1lLCBpbmRleCkgLT5cbiAgICAgIGFydGlzdEVsZW0gPSBjcmVhdGVFbGVtKCdhJywgJ3R2LXdpZGdldF9fcHJvZ3JhbS1hcnRpc3QnKVxuICAgICAgYXJ0aXN0RWxlbS5ocmVmID0gJyMnXG4gICAgICBhcnRpc3RFbGVtLnRleHRDb250ZW50ID0gYXJ0aXN0TmFtZVxuICAgICAgcHJvZ3JhbUFydGlzdHMuYXBwZW5kQ2hpbGQgYXJ0aXN0RWxlbVxuXG4gICAgICBpZiBpbmRleCAhPSBpdGVtLmFydGlzdHMubGVuZ3RoIC0gMVxuICAgICAgICBwcm9ncmFtQXJ0aXN0cy5pbm5lckhUTUwgKz0gJywgJ1xuICAgICAgcmV0dXJuXG4gICAgICBcbiAgICBwcm9ncmFtQ2FyZC5hcHBlbmRDaGlsZCB0aXRsZUJsb2NrXG4gICAgcHJvZ3JhbUNhcmQuYXBwZW5kQ2hpbGQgcHJvZ3JhbURlc2NyaXB0aW9uXG4gICAgcHJvZ3JhbUNhcmQuYXBwZW5kQ2hpbGQgcHJvZ3JhbUFydGlzdHNcblxuICAgICMg0KLRg9GCINC90YPQttC90L4g0YPQutCw0LfQsNGC0Ywg0YLQtdC60YPRidC40LUg0LLRgNC10LzRjyDQuCDQtNCw0YLRgy4g0JjRgdC/0L7Qu9GM0LfRg9C10YLRgdGPINC00LvRjyDQv9C+0LrQsNC30LAg0LrQvdC+0L/QvtC6IFwi0KHQvNC+0YLRgNC10YLRjFwiINC4IFwi0KHQtdC50YfQsNGBINCyINGN0YTQuNGA0LVcIlxuICAgIGlmIG1vbWVudChkYXRlKS5mb3JtYXQoJ0wnKSBpcyBtb21lbnQodG9kYXlEYXRlKS5mb3JtYXQoJ0wnKSBhbmQgaXRlbS50aW1lIGlzICcxMDo1OSdcblxuICAgICAgYnV0dG9uQmxvY2sgPSBjcmVhdGVFbGVtKCdkaXYnLCAndHYtd2lkZ2V0X19idXR0b24tYmxvY2snKVxuICAgICAgYnV0dG9uID0gY3JlYXRlRWxlbSgnZGl2JywgJ2xvb2stYnV0dG9uJylcbiAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC80L7RgtGA0LXRgtGMJ1xuXG4gICAgICBsaXZlVGl0bGUgPSBjcmVhdGVFbGVtKCdkaXYnLCAndHYtd2lkZ2V0X19saWZlLW5vdycpXG4gICAgICBsaXZlVGl0bGUudGV4dENvbnRlbnQgPSAn0KHQtdC50YfQsNGBINCyINGN0YTQuNGA0LUnXG5cbiAgICAgIGJ1dHRvbkJsb2NrLmFwcGVuZENoaWxkIGJ1dHRvblxuICAgICAgYnV0dG9uQmxvY2suYXBwZW5kQ2hpbGQgbGl2ZVRpdGxlXG4gICAgICBwcm9ncmFtQ2FyZC5hcHBlbmRDaGlsZCBidXR0b25CbG9ja1xuXG4gICAgcHJvZ3JhbUNvbnRhaW5lci5hcHBlbmRDaGlsZCBwcm9ncmFtQ2FyZFxuICAgIHJldHVyblxuICByZXR1cm5cblxuXG4jINGB0LvQsNC50LTQtdGAXG5hcnJvd3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudHYtd2lkZ2V0X19hcnJvdy1jaXJjbGUnKVxuY2Fyb3VzZWxDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHYtd2lkZ2V0X19zY2hlZHVsZS1jb3JvdXNlbCcpXG5jYXJvdXNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50di13aWRnZXRfX3NjaGVkdWxlLWl0ZW1zJylcbmZpcnN0U2xpZGUgPSB0cnVlXG5sYXN0U2xpZGUgPSBmYWxzZVxuaXRlbVdpZHRoID0gODQgIyDQqNC40YDQuNC90LAg0Y3Qu9C10LzQtdC90YLQsFxuXG5udW1iZXJPZlN0ZXBzID0gdW5kZWZpbmVkICMg0JrQvtC70LjRh9C10YHRgtCy0L4g0YjQsNCz0L7Qsiwg0LrQvtGC0L7RgNC+0LUg0L/RgNC10LTRgdGC0L7QuNGCINGB0LTQtdC70LDRgtGMIFxuY3VycmVudFN0ZXBXaWR0aCA9IDYwICMg0JjQt9C90LDRh9Cw0LvRjNC90L7QtSDQvtGB0YLQvtGP0L3QuNC1IGxlZnQgXG5pdGVtc1Njcm9sbGVkID0gMCAj0JrQvtC70LjRh9C10YHRgtCy0L4g0Y3Qu9C10LzQtdC90YLQvtCyLCDQutC+0YLQvtGA0YvQtSDQvNGLINGB0LrRgNC+0LvQu9C40LxcblxuXG5wdXNoU2xpZGVyID0gKGRpcmVjdGlvbiA9ICdyaWdodCcpIC0+XG4gIGl0ZW1zTnVtYmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnR2LXdpZGdldF9fc2NoZWR1bGUtaXRlbScpLmxlbmd0aCAjINCe0LHRidC10LUg0LrQvtC70LjRh9C10YHRgtCy0L4g0Y3Qu9C10LzQtdC90YLQvtCyXG4gIGNvbnRhaW5lcldpZHRoID0gY2Fyb3VzZWxDb250YWluZXIub2Zmc2V0V2lkdGggIyDQqNC40YDQuNC90LAg0LrQvtC90YLQtdC50L3QtdGA0LBcbiBcbiAgIyDQkiDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4INC+0YIg0YjQuNGA0LjQvdGLINC60L7QvdGC0LXQudC90LXRgNCwINC+0L/RgNC10LTQtdC70Y/QtdC8LCDRgdC60L7Qu9GM0LrQviDRjdC70LXQvNC10L3RgtC+0LIg0L3QsNC00L4g0L/RgNC+0LrRgNGD0YLQuNGC0YxcbiAgc3dpdGNoIHRydWVcbiAgICB3aGVuIGNvbnRhaW5lcldpZHRoIDwgMzYwXG4gICAgICBudW1iZXJPZlN0ZXBzID0gMVxuICAgIHdoZW4gY29udGFpbmVyV2lkdGggPCA0MjBcbiAgICAgIG51bWJlck9mU3RlcHMgPSAyXG4gICAgd2hlbiBjb250YWluZXJXaWR0aCA8IDUwNVxuICAgICAgbnVtYmVyT2ZTdGVwcyA9IDNcbiAgICB3aGVuIGNvbnRhaW5lcldpZHRoIDwgNTg1XG4gICAgICBudW1iZXJPZlN0ZXBzID0gNFxuICAgIGVsc2VcbiAgICAgIG51bWJlck9mU3RlcHMgPSA1XG5cbiAgIyDQntC/0YDQtdC00LXQu9GP0LXQvCwg0YHQutC+0LvRjNC60L4g0Y3Qu9C10LzQtdC90YLQvtCyINC/0YDQtdC00YHRgtC+0LjRgtGMINC/0YDQvtC60YDRg9GC0LjRgtGMLiBcbiAgcmVtYWluZWRUb1Njcm9sbCA9IGl0ZW1zTnVtYmVyIC0gaXRlbXNTY3JvbGxlZCAtIG51bWJlck9mU3RlcHMgLSAyXG5cbiAgaWYgZGlyZWN0aW9uIGlzICdyaWdodCdcbiAgICBpZiByZW1haW5lZFRvU2Nyb2xsIDwgbnVtYmVyT2ZTdGVwcyAjINCV0YHQu9C4INC60L7Qu9C40YfQtdGB0YLQstC+INGN0LvQtdC80LXQvdGC0L7Qsiwg0YHQutC+0LvRjNC60L4g0LzQvtC20L3QviDQv9GA0L7QutGA0YPRgtC40YLRjCwg0LzQtdC90YzRiNC1INC60L7Qu9C40YfQtdGB0YLQstCwINGI0LDQs9C+0LJcbiAgICAgIG51bWJlck9mU3RlcHMgPSByZW1haW5lZFRvU2Nyb2xsICMg0JPQvtCy0L7RgNC40LwsINGB0LrQvtC70YzQutC+INGI0LDQs9C+0LIg0L/RgNC+0LrRgNGD0YfQuNCy0LDQtdC8XG4gICAgICBsYXN0U2xpZGUgPSB0cnVlICMg0J7Qv9GA0LXQtNC10LvRj9C10LwsINGH0YLQviDRgdC70LDQudC0INC/0L7RgdC70LXQtNC90LjQuVxuXG4gIHNsaWRlV2lkdGggPSBpdGVtV2lkdGggKiBudW1iZXJPZlN0ZXBzICAjINCe0L/RgNC10LTQtdC70Y/QtdC8INGI0LjRgNC40L3RgyDRgdC70LDQudC00LAgKNC90LDRgdC60L7Qu9GM0LrQviDQvdGD0LbQvdC+INC/0YDQvtC60YDRg9GC0LjRgtGMKVxuXG4gIGlmIGRpcmVjdGlvbiBpcyAncmlnaHQnXG4gICAgY3VycmVudFN0ZXBXaWR0aCAtPSBzbGlkZVdpZHRoXG4gICAgaXRlbXNTY3JvbGxlZCArPSBudW1iZXJPZlN0ZXBzXG5cbiAgICBpZiBsYXN0U2xpZGUgYW5kIHJlbWFpbmVkVG9TY3JvbGwgIT0gMFxuICAgICAgY3VycmVudFN0ZXBXaWR0aCA9IC0xICogaXRlbVdpZHRoICogaXRlbXNOdW1iZXIgKyBjb250YWluZXJXaWR0aCAtIDQwXG4gICAgICBcbiAgICBpZiBmaXJzdFNsaWRlXG4gICAgICBjdXJyZW50U3RlcFdpZHRoICs9IGl0ZW1XaWR0aFxuICAgICAgY3VycmVudFN0ZXBXaWR0aCAtPSA2MFxuICAgICAgZmlyc3RTbGlkZSA9IGZhbHNlXG4gIGVsc2UgIyDQldGB0LvQuCDQv9GA0L7QutGA0YPRh9C40LLQsNC10Lwg0LLQu9C10LLQvlxuICAgIGN1cnJlbnRTdGVwV2lkdGggKz0gc2xpZGVXaWR0aFxuICAgIGl0ZW1zU2Nyb2xsZWQgLT0gbnVtYmVyT2ZTdGVwc1xuXG4gICAgaWYgaXRlbXNTY3JvbGxlZCA8PSAwXG4gICAgICBjdXJyZW50U3RlcFdpZHRoID0gNjAgIyDQstC+0LfQstGA0LDRidCw0LXQvNGB0Y8g0LIg0LjQt9C90LDRh9Cw0LvRjNC90Y4g0L/QtdGA0LLRg9GOINC/0L7Qt9C40YbQuNGOXG4gICAgICBpdGVtc1Njcm9sbGVkID0gMFxuICAgICAgZmlyc3RTbGlkZSA9IHRydWUgXG5cbiAgICBpZiBsYXN0U2xpZGVcbiAgICAgIGxhc3RTbGlkZSA9IGZhbHNlXG5cbiAgY2Fyb3VzZWwuc3R5bGUubGVmdCA9IGN1cnJlbnRTdGVwV2lkdGgudG9TdHJpbmcoKSArICdweCdcbiAgcmV0dXJuXG5cbkFycmF5LmZyb20oYXJyb3dzKS5mb3JFYWNoIChpdGVtKSAtPlxuICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIgJ2NsaWNrJywgKGV2ZW50KSAtPlxuICAgIGlmIGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygndHYtd2lkZ2V0X19hcnJvdy1jaXJjbGVfcmlnaHQnKVxuICAgICAgcHVzaFNsaWRlcigpXG4gICAgZWxzZVxuICAgICAgcHVzaFNsaWRlciAnbGVmdCdcbiAgICByZXR1cm5cbiAgcmV0dXJuXG5cbiMg0KHQvtC30LTQsNGR0Lwg0LrQsNC70LXQvdC00LDRgNGMXG5yZWZlclRvSnNvbiBjcmVhdGVTY2hlZHVsZUxpc3QiLCIvLyDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0YPQv9GA0L7RidC10L3QuNGPINGB0L7Qt9C00LDQvdC40LUg0Y3Qu9C10LzQtdC90YLQvtCyLlxudmFyIGFycm93cywgY2Fyb3VzZWwsIGNhcm91c2VsQ29udGFpbmVyLCBjcmVhdGVFbGVtLCBjcmVhdGVTY2hlZHVsZUxpc3QsIGN1cnJlbnRTdGVwV2lkdGgsIGZpcnN0U2xpZGUsIGl0ZW1XaWR0aCwgaXRlbXNTY3JvbGxlZCwgbGFzdFNsaWRlLCBudW1iZXJPZlN0ZXBzLCBwdXNoU2xpZGVyLCByZWZlclRvSnNvbiwgdG9kYXlEYXRlLCB1cGRhdGVEYXlQcm9ncmFtO1xuXG5jcmVhdGVFbGVtID0gZnVuY3Rpb24odGFnLCBlbGVtQ2xhc3MpIHtcbiAgdmFyIGVsZW07XG4gIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG4gIGVsZW0uY2xhc3NMaXN0LmFkZChlbGVtQ2xhc3MpO1xuICByZXR1cm4gZWxlbTtcbn07XG5cblxuLy8g0JfQtNC10YHRjCDQvdGD0LbQvdC+INCx0YPQtNC10YIg0L/QvtC00YLRj9Cz0LjQstCw0YLRjCDQsNC60YLRg9Cw0LvRjNC90YPRjiDQtNCw0YLRgy5cbnRvZGF5RGF0ZSA9ICcyMDIwLTA1LTI1JztcblxuLy8g0J7QsdGA0LDRidCw0LXQvNGB0Y8g0LoganNvbi3RhNCw0LnQu9GDXG5yZWZlclRvSnNvbiA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIGZldGNoKCd0ZXN0Lmpzb24nLCB7XG4gICAgbWV0aG9kOiAnZ2V0J1xuICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgfSkudGhlbihmdW5jdGlvbihzY2hlZHVsZSkge1xuICAgIHJldHVybiBjYWxsYmFjayhzY2hlZHVsZSk7XG4gIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgIHJldHVybiBjb25zb2xlLmxvZyhlcnIpO1xuICB9KTtcbn07XG5cbmNyZWF0ZVNjaGVkdWxlTGlzdCA9IGZ1bmN0aW9uKHNjaGVkdWxlKSB7XG4gIHZhciBkYXRlLCBkYXlOdW1iZXIsIGRheVdlZWssIGtleSwgbW91bnRoLCByZWdpc3RlckV2ZW50cywgc2NoZWR1bGVDb250YWluZXIsIHNjaGVkdWxlRGF5LCBzY2hlZHVsZUl0ZW0sIHNjaGVkdWxlTGluZSwgc2NoZWR1bGVNb3VudGgsIHNjaGVkdWxlV2Vla2RheTtcbiAgc2NoZWR1bGVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHYtd2lkZ2V0X19zY2hlZHVsZS1pdGVtcycpO1xuLy8g0KHQvtC30LTQsNGR0Lwg0YDQsNGB0L/QuNGB0LDQvdC40LUgXG4gIGZvciAoa2V5IGluIHNjaGVkdWxlKSB7XG4gICAgbW9tZW50LmxvY2FsZSgncnUnKTtcbiAgICBkYXRlID0gbW9tZW50KGtleSk7XG4gICAgZGF5TnVtYmVyID0gZGF0ZS5mb3JtYXQoJ0REJyk7XG4gICAgbW91bnRoID0gZGF0ZS5mb3JtYXQoJ01NTU0nKTtcbiAgICBkYXlXZWVrID0gZGF0ZS5mb3JtYXQoJ2RkJyk7XG4gICAgc2NoZWR1bGVJdGVtID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fc2NoZWR1bGUtaXRlbScpO1xuICAgIHNjaGVkdWxlSXRlbS5kYXRhc2V0LmRhdGUgPSBrZXk7XG4gICAgaWYgKGRheVdlZWsgPT09ICfRgdCxJyB8fCBkYXlXZWVrID09PSAn0LLRgScpIHtcbiAgICAgIHNjaGVkdWxlSXRlbS5jbGFzc0xpc3QuYWRkKCd0di13aWRnZXRfX3NjaGVkdWxlLWl0ZW1fd2Vla2VuZCcpO1xuICAgIH0gZWxzZSBpZiAoZGF5V2VlayA9PT0gJ9C/0YInKSB7XG4gICAgICBzY2hlZHVsZUl0ZW0uY2xhc3NMaXN0LmFkZCgndHYtd2lkZ2V0X19zY2hlZHVsZS1pdGVtX2ZyaWRheScpO1xuICAgIH1cbiAgICBzY2hlZHVsZURheSA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX2RheScpO1xuICAgIHNjaGVkdWxlRGF5LnRleHRDb250ZW50ID0gZGF5TnVtYmVyO1xuICAgIHNjaGVkdWxlTW91bnRoID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fbW91bnRoJyk7XG4gICAgc2NoZWR1bGVNb3VudGgudGV4dENvbnRlbnQgPSBtb3VudGg7XG4gICAgc2NoZWR1bGVMaW5lID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fbGluZScpO1xuICAgIHNjaGVkdWxlV2Vla2RheSA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX3dlZWtkYXknKTtcbiAgICBzY2hlZHVsZVdlZWtkYXkudGV4dENvbnRlbnQgPSBkYXlXZWVrO1xuICAgIHNjaGVkdWxlSXRlbS5hcHBlbmRDaGlsZChzY2hlZHVsZURheSk7XG4gICAgc2NoZWR1bGVJdGVtLmFwcGVuZENoaWxkKHNjaGVkdWxlTW91bnRoKTtcbiAgICBzY2hlZHVsZUl0ZW0uYXBwZW5kQ2hpbGQoc2NoZWR1bGVMaW5lKTtcbiAgICBzY2hlZHVsZUl0ZW0uYXBwZW5kQ2hpbGQoc2NoZWR1bGVXZWVrZGF5KTtcbiAgICBzY2hlZHVsZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzY2hlZHVsZUl0ZW0pO1xuICB9XG4gIC8vINCe0LHQvdC+0LLQu9GP0LXQvCDRjdC70LXQvNC10L3RgtGLINC/0YDQuCDQt9Cw0LPRgNGD0LfQutC1INGB0YLRgNCw0L3QuNGG0YtcbiAgdXBkYXRlRGF5UHJvZ3JhbSh0b2RheURhdGUsIHNjaGVkdWxlW3RvZGF5RGF0ZV0pO1xuICAvLyDQoNC10LPQuNGB0YLRgNC40YDRg9C10Lwg0YHQvtCx0YvRgtC40Y9cbiAgcmVnaXN0ZXJFdmVudHMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2NoZWR1bGVEYXlzO1xuICAgIHNjaGVkdWxlRGF5cyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnR2LXdpZGdldF9fc2NoZWR1bGUtaXRlbScpKTtcbiAgICBzY2hlZHVsZURheXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgdmFyIGVsZW07XG4gICAgICAgIGVsZW0gPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLnR2LXdpZGdldF9fc2NoZWR1bGUtaXRlbScpO1xuICAgICAgICB1cGRhdGVEYXlQcm9ncmFtKGVsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLWRhdGUnKSwgc2NoZWR1bGVbZWxlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZGF0ZScpXSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbiAgcmVnaXN0ZXJFdmVudHMoKTtcbn07XG5cbi8vINCe0LHQvdC+0LLQu9GP0LXQvCDRjdC70LXQvNC10L3RgtGLINGA0LDRgdC/0LjRgdCw0L3QuNGPINC/0L7QtCDQutCw0LvQtdC90LTQsNGA0ZHQvFxudXBkYXRlRGF5UHJvZ3JhbSA9IGZ1bmN0aW9uKGRhdGUsIHNjaGVkdWxlKSB7XG4gIHZhciBwcm9ncmFtQ29udGFpbmVyLCB3aWRnZXRUaXRsZVNwYW4sIHdpZGdldFRpdGxlU3BhblRleHQ7XG4gIHdpZGdldFRpdGxlU3BhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50dl93aWRnZXRfX3RvZGF5LWRhdGUnKTtcbiAgd2lkZ2V0VGl0bGVTcGFuVGV4dCA9IG1vbWVudChkYXRlKS5mb3JtYXQoJ2RkZGQsIEREIE1NTU0gWVlZWScpO1xuICBpZiAoZGF0ZSA9PT0gdG9kYXlEYXRlKSB7XG4gICAgd2lkZ2V0VGl0bGVTcGFuLnRleHRDb250ZW50ID0gJyDQvdCwINGB0LXQs9C+0LTQvdGPJztcbiAgfSBlbHNlIHtcbiAgICB3aWRnZXRUaXRsZVNwYW4udGV4dENvbnRlbnQgPSAnJztcbiAgfVxuICB3aWRnZXRUaXRsZVNwYW4udGV4dENvbnRlbnQgKz0gYC4gJHt3aWRnZXRUaXRsZVNwYW5UZXh0WzBdLnRvVXBwZXJDYXNlKCl9JHt3aWRnZXRUaXRsZVNwYW5UZXh0LnNsaWNlKDEpfWA7XG4gIHByb2dyYW1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHYtd2lkZ2V0X19wcm9ncmFtLWNhcmRzJyk7XG4gIHByb2dyYW1Db250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gIHNjaGVkdWxlLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcbiAgICB2YXIgYXdhcmQsIGF3YXJkcywgYnV0dG9uLCBidXR0b25CbG9jaywgY2hhbm5lbEltZywgY291bnRyeUltZywga2V5LCBsaXZlVGl0bGUsIHByb2dyYW1BcnRpc3RzLCBwcm9ncmFtQ2FyZCwgcHJvZ3JhbUNvdW50cnksIHByb2dyYW1EZXNjcmlwdGlvbiwgcHJvZ3JhbVRpbWUsIHByb2dyYW1UaXRsZSwgdGl0bGVCbG9jaywgdHZDaGFubmVsO1xuICAgIHByb2dyYW1DYXJkID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fcHJvZ3JhbS1jYXJkJyk7XG4gICAgdGl0bGVCbG9jayA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX3Byb2dyYW0tdGl0bGUtYmxvY2snKTtcbiAgICBwcm9ncmFtVGltZSA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX3Byb2dyYW0tdGltZScpO1xuICAgIHByb2dyYW1UaW1lLnRleHRDb250ZW50ID0gaXRlbS50aW1lO1xuICAgIHByb2dyYW1UaXRsZSA9IGNyZWF0ZUVsZW0oJ2EnLCAndHYtd2lkZ2V0X19wcm9ncmFtLXRpdGxlJyk7XG4gICAgcHJvZ3JhbVRpdGxlLmhyZWYgPSAnIyc7XG4gICAgcHJvZ3JhbVRpdGxlLnRleHRDb250ZW50ID0gaXRlbS50aXRsZTtcbiAgICBhd2FyZHMgPSBjcmVhdGVFbGVtKCdkaXYnLCAndHYtd2lkZ2V0X19wcm9ncmFtLWF3YXJkcycpO1xuICAgIGZvciAoa2V5IGluIGl0ZW0uYXdhcmRzKSB7XG4gICAgICBpZiAoaXRlbS5hd2FyZHNba2V5XSA9PT0gJ3RydWUnKSB7XG4gICAgICAgIGF3YXJkID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fcHJvZ3JhbS1hd2FyZCcpO1xuICAgICAgICBhd2FyZC5jbGFzc0xpc3QuYWRkKCd0di13aWRnZXRfX3Byb2dyYW0tYXdhcmRfJyArIGtleSk7XG4gICAgICAgIGF3YXJkcy5hcHBlbmRDaGlsZChhd2FyZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHByb2dyYW1Db3VudHJ5ID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fcHJvZ3JhbS1jb3VudHJ5Jyk7XG4gICAgY291bnRyeUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGNvdW50cnlJbWcuc3JjID0gJ2ltZy9pY29ucy9ydXNzaWEtaWNvbi5zdmcnO1xuICAgIGNvdW50cnlJbWcuYWx0ID0gaXRlbS5jb3VudHJ5O1xuICAgIHByb2dyYW1Db3VudHJ5LmFwcGVuZENoaWxkKGNvdW50cnlJbWcpO1xuICAgIHR2Q2hhbm5lbCA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX3Byb2dyYW0tY2hhbm5lbCcpO1xuICAgIGNoYW5uZWxJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBjaGFubmVsSW1nLnNyYyA9ICdpbWcvaWNvbnMvMXR2LWljb24uc3ZnJztcbiAgICBjaGFubmVsSW1nLmFsdCA9IGl0ZW0uY2hhbm5lbDtcbiAgICB0dkNoYW5uZWwuYXBwZW5kQ2hpbGQoY2hhbm5lbEltZyk7XG4gICAgdGl0bGVCbG9jay5hcHBlbmRDaGlsZChwcm9ncmFtVGltZSk7XG4gICAgdGl0bGVCbG9jay5hcHBlbmRDaGlsZChwcm9ncmFtVGl0bGUpO1xuICAgIHRpdGxlQmxvY2suYXBwZW5kQ2hpbGQoYXdhcmRzKTtcbiAgICBpZiAoaXRlbS5jb3VudHJ5KSB7XG4gICAgICB0aXRsZUJsb2NrLmFwcGVuZENoaWxkKHByb2dyYW1Db3VudHJ5KTtcbiAgICB9XG4gICAgdGl0bGVCbG9jay5hcHBlbmRDaGlsZCh0dkNoYW5uZWwpO1xuICAgIHByb2dyYW1EZXNjcmlwdGlvbiA9IGNyZWF0ZUVsZW0oJ2RpdicsICd0di13aWRnZXRfX3Byb2dyYW0tZGVzY3JpcHRpb24nKTtcbiAgICBwcm9ncmFtRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBpdGVtLmRlc2NyaXB0aW9uO1xuICAgIHByb2dyYW1BcnRpc3RzID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fcHJvZ3JhbS1hcnRpc3RzJyk7XG4gICAgaXRlbS5hcnRpc3RzLmZvckVhY2goZnVuY3Rpb24oYXJ0aXN0TmFtZSwgaW5kZXgpIHtcbiAgICAgIHZhciBhcnRpc3RFbGVtO1xuICAgICAgYXJ0aXN0RWxlbSA9IGNyZWF0ZUVsZW0oJ2EnLCAndHYtd2lkZ2V0X19wcm9ncmFtLWFydGlzdCcpO1xuICAgICAgYXJ0aXN0RWxlbS5ocmVmID0gJyMnO1xuICAgICAgYXJ0aXN0RWxlbS50ZXh0Q29udGVudCA9IGFydGlzdE5hbWU7XG4gICAgICBwcm9ncmFtQXJ0aXN0cy5hcHBlbmRDaGlsZChhcnRpc3RFbGVtKTtcbiAgICAgIGlmIChpbmRleCAhPT0gaXRlbS5hcnRpc3RzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgcHJvZ3JhbUFydGlzdHMuaW5uZXJIVE1MICs9ICcsICc7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcHJvZ3JhbUNhcmQuYXBwZW5kQ2hpbGQodGl0bGVCbG9jayk7XG4gICAgcHJvZ3JhbUNhcmQuYXBwZW5kQ2hpbGQocHJvZ3JhbURlc2NyaXB0aW9uKTtcbiAgICBwcm9ncmFtQ2FyZC5hcHBlbmRDaGlsZChwcm9ncmFtQXJ0aXN0cyk7XG4gICAgLy8g0KLRg9GCINC90YPQttC90L4g0YPQutCw0LfQsNGC0Ywg0YLQtdC60YPRidC40LUg0LLRgNC10LzRjyDQuCDQtNCw0YLRgy4g0JjRgdC/0L7Qu9GM0LfRg9C10YLRgdGPINC00LvRjyDQv9C+0LrQsNC30LAg0LrQvdC+0L/QvtC6IFwi0KHQvNC+0YLRgNC10YLRjFwiINC4IFwi0KHQtdC50YfQsNGBINCyINGN0YTQuNGA0LVcIlxuICAgIGlmIChtb21lbnQoZGF0ZSkuZm9ybWF0KCdMJykgPT09IG1vbWVudCh0b2RheURhdGUpLmZvcm1hdCgnTCcpICYmIGl0ZW0udGltZSA9PT0gJzEwOjU5Jykge1xuICAgICAgYnV0dG9uQmxvY2sgPSBjcmVhdGVFbGVtKCdkaXYnLCAndHYtd2lkZ2V0X19idXR0b24tYmxvY2snKTtcbiAgICAgIGJ1dHRvbiA9IGNyZWF0ZUVsZW0oJ2RpdicsICdsb29rLWJ1dHRvbicpO1xuICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0LzQvtGC0YDQtdGC0YwnO1xuICAgICAgbGl2ZVRpdGxlID0gY3JlYXRlRWxlbSgnZGl2JywgJ3R2LXdpZGdldF9fbGlmZS1ub3cnKTtcbiAgICAgIGxpdmVUaXRsZS50ZXh0Q29udGVudCA9ICfQodC10LnRh9Cw0YEg0LIg0Y3RhNC40YDQtSc7XG4gICAgICBidXR0b25CbG9jay5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgICAgYnV0dG9uQmxvY2suYXBwZW5kQ2hpbGQobGl2ZVRpdGxlKTtcbiAgICAgIHByb2dyYW1DYXJkLmFwcGVuZENoaWxkKGJ1dHRvbkJsb2NrKTtcbiAgICB9XG4gICAgcHJvZ3JhbUNvbnRhaW5lci5hcHBlbmRDaGlsZChwcm9ncmFtQ2FyZCk7XG4gIH0pO1xufTtcblxuLy8g0YHQu9Cw0LnQtNC10YBcbmFycm93cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50di13aWRnZXRfX2Fycm93LWNpcmNsZScpO1xuXG5jYXJvdXNlbENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50di13aWRnZXRfX3NjaGVkdWxlLWNvcm91c2VsJyk7XG5cbmNhcm91c2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnR2LXdpZGdldF9fc2NoZWR1bGUtaXRlbXMnKTtcblxuZmlyc3RTbGlkZSA9IHRydWU7XG5cbmxhc3RTbGlkZSA9IGZhbHNlO1xuXG5pdGVtV2lkdGggPSA4NDsgLy8g0KjQuNGA0LjQvdCwINGN0LvQtdC80LXQvdGC0LBcblxubnVtYmVyT2ZTdGVwcyA9IHZvaWQgMDsgLy8g0JrQvtC70LjRh9C10YHRgtCy0L4g0YjQsNCz0L7Qsiwg0LrQvtGC0L7RgNC+0LUg0L/RgNC10LTRgdGC0L7QuNGCINGB0LTQtdC70LDRgtGMIFxuXG5jdXJyZW50U3RlcFdpZHRoID0gNjA7IC8vINCY0LfQvdCw0YfQsNC70YzQvdC+0LUg0L7RgdGC0L7Rj9C90LjQtSBsZWZ0IFxuXG5pdGVtc1Njcm9sbGVkID0gMDsgLy/QmtC+0LvQuNGH0LXRgdGC0LLQviDRjdC70LXQvNC10L3RgtC+0LIsINC60L7RgtC+0YDRi9C1INC80Ysg0YHQutGA0L7Qu9C70LjQvFxuXG5wdXNoU2xpZGVyID0gZnVuY3Rpb24oZGlyZWN0aW9uID0gJ3JpZ2h0Jykge1xuICB2YXIgY29udGFpbmVyV2lkdGgsIGl0ZW1zTnVtYmVyLCByZW1haW5lZFRvU2Nyb2xsLCBzbGlkZVdpZHRoO1xuICBpdGVtc051bWJlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50di13aWRnZXRfX3NjaGVkdWxlLWl0ZW0nKS5sZW5ndGg7IC8vINCe0LHRidC10LUg0LrQvtC70LjRh9C10YHRgtCy0L4g0Y3Qu9C10LzQtdC90YLQvtCyXG4gIGNvbnRhaW5lcldpZHRoID0gY2Fyb3VzZWxDb250YWluZXIub2Zmc2V0V2lkdGg7IC8vINCo0LjRgNC40L3QsCDQutC+0L3RgtC10LnQvdC10YDQsFxuICBcbiAgICAgIC8vINCSINC30LDQstC40YHQuNC80L7RgdGC0Lgg0L7RgiDRiNC40YDQuNC90Ysg0LrQvtC90YLQtdC50L3QtdGA0LAg0L7Qv9GA0LXQtNC10LvRj9C10LwsINGB0LrQvtC70YzQutC+INGN0LvQtdC80LXQvdGC0L7QsiDQvdCw0LTQviDQv9GA0L7QutGA0YPRgtC40YLRjFxuICBzd2l0Y2ggKHRydWUpIHtcbiAgICBjYXNlIGNvbnRhaW5lcldpZHRoIDwgMzYwOlxuICAgICAgbnVtYmVyT2ZTdGVwcyA9IDE7XG4gICAgICBicmVhaztcbiAgICBjYXNlIGNvbnRhaW5lcldpZHRoIDwgNDIwOlxuICAgICAgbnVtYmVyT2ZTdGVwcyA9IDI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIGNvbnRhaW5lcldpZHRoIDwgNTA1OlxuICAgICAgbnVtYmVyT2ZTdGVwcyA9IDM7XG4gICAgICBicmVhaztcbiAgICBjYXNlIGNvbnRhaW5lcldpZHRoIDwgNTg1OlxuICAgICAgbnVtYmVyT2ZTdGVwcyA9IDQ7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgbnVtYmVyT2ZTdGVwcyA9IDU7XG4gIH1cbiAgLy8g0J7Qv9GA0LXQtNC10LvRj9C10LwsINGB0LrQvtC70YzQutC+INGN0LvQtdC80LXQvdGC0L7QsiDQv9GA0LXQtNGB0YLQvtC40YLRjCDQv9GA0L7QutGA0YPRgtC40YLRjC4gXG4gIHJlbWFpbmVkVG9TY3JvbGwgPSBpdGVtc051bWJlciAtIGl0ZW1zU2Nyb2xsZWQgLSBudW1iZXJPZlN0ZXBzIC0gMjtcbiAgaWYgKGRpcmVjdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgIGlmIChyZW1haW5lZFRvU2Nyb2xsIDwgbnVtYmVyT2ZTdGVwcykgeyAvLyDQldGB0LvQuCDQutC+0LvQuNGH0LXRgdGC0LLQviDRjdC70LXQvNC10L3RgtC+0LIsINGB0LrQvtC70YzQutC+INC80L7QttC90L4g0L/RgNC+0LrRgNGD0YLQuNGC0YwsINC80LXQvdGM0YjQtSDQutC+0LvQuNGH0LXRgdGC0LLQsCDRiNCw0LPQvtCyXG4gICAgICBudW1iZXJPZlN0ZXBzID0gcmVtYWluZWRUb1Njcm9sbDsgLy8g0JPQvtCy0L7RgNC40LwsINGB0LrQvtC70YzQutC+INGI0LDQs9C+0LIg0L/RgNC+0LrRgNGD0YfQuNCy0LDQtdC8XG4gICAgICBsYXN0U2xpZGUgPSB0cnVlOyAvLyDQntC/0YDQtdC00LXQu9GP0LXQvCwg0YfRgtC+INGB0LvQsNC50LQg0L/QvtGB0LvQtdC00L3QuNC5XG4gICAgfVxuICB9XG4gIHNsaWRlV2lkdGggPSBpdGVtV2lkdGggKiBudW1iZXJPZlN0ZXBzOyAvLyDQntC/0YDQtdC00LXQu9GP0LXQvCDRiNC40YDQuNC90YMg0YHQu9Cw0LnQtNCwICjQvdCw0YHQutC+0LvRjNC60L4g0L3Rg9C20L3QviDQv9GA0L7QutGA0YPRgtC40YLRjClcbiAgaWYgKGRpcmVjdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgIGN1cnJlbnRTdGVwV2lkdGggLT0gc2xpZGVXaWR0aDtcbiAgICBpdGVtc1Njcm9sbGVkICs9IG51bWJlck9mU3RlcHM7XG4gICAgaWYgKGxhc3RTbGlkZSAmJiByZW1haW5lZFRvU2Nyb2xsICE9PSAwKSB7XG4gICAgICBjdXJyZW50U3RlcFdpZHRoID0gLTEgKiBpdGVtV2lkdGggKiBpdGVtc051bWJlciArIGNvbnRhaW5lcldpZHRoIC0gNDA7XG4gICAgfVxuICAgIGlmIChmaXJzdFNsaWRlKSB7XG4gICAgICBjdXJyZW50U3RlcFdpZHRoICs9IGl0ZW1XaWR0aDtcbiAgICAgIGN1cnJlbnRTdGVwV2lkdGggLT0gNjA7XG4gICAgICBmaXJzdFNsaWRlID0gZmFsc2U7IC8vINCV0YHQu9C4INC/0YDQvtC60YDRg9GH0LjQstCw0LXQvCDQstC70LXQstC+XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGN1cnJlbnRTdGVwV2lkdGggKz0gc2xpZGVXaWR0aDtcbiAgICBpdGVtc1Njcm9sbGVkIC09IG51bWJlck9mU3RlcHM7XG4gICAgaWYgKGl0ZW1zU2Nyb2xsZWQgPD0gMCkge1xuICAgICAgY3VycmVudFN0ZXBXaWR0aCA9IDYwOyAvLyDQstC+0LfQstGA0LDRidCw0LXQvNGB0Y8g0LIg0LjQt9C90LDRh9Cw0LvRjNC90Y4g0L/QtdGA0LLRg9GOINC/0L7Qt9C40YbQuNGOXG4gICAgICBpdGVtc1Njcm9sbGVkID0gMDtcbiAgICAgIGZpcnN0U2xpZGUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAobGFzdFNsaWRlKSB7XG4gICAgICBsYXN0U2xpZGUgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgY2Fyb3VzZWwuc3R5bGUubGVmdCA9IGN1cnJlbnRTdGVwV2lkdGgudG9TdHJpbmcoKSArICdweCc7XG59O1xuXG5BcnJheS5mcm9tKGFycm93cykuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3R2LXdpZGdldF9fYXJyb3ctY2lyY2xlX3JpZ2h0JykpIHtcbiAgICAgIHB1c2hTbGlkZXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHVzaFNsaWRlcignbGVmdCcpO1xuICAgIH1cbiAgfSk7XG59KTtcblxuLy8g0KHQvtC30LTQsNGR0Lwg0LrQsNC70LXQvdC00LDRgNGMXG5yZWZlclRvSnNvbihjcmVhdGVTY2hlZHVsZUxpc3QpO1xuIl19
